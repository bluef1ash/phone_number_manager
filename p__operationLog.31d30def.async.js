(self.webpackChunkphone_number_manager_frontend=self.webpackChunkphone_number_manager_frontend||[]).push([[970],{22806:function(h){h.exports={"operation-log-table":"operation-log-table___1H03L"}},69070:function(h,C,e){"use strict";e.r(C),e.d(C,{default:function(){return N}});var v={};e.r(v),e.d(v,{batchOperationLog:function(){return R},queryOperationLogList:function(){return A}});var d=e(39428),L=e(3182),x=e(2824),E=e(44534),y=e(37201),p=e(11849),G=e(71194),D=e(50146),P=e(93224),u=e(61578),g=e(67294),t=e(85893),B=["operationLog"],O=function(r){var o,a=r.operationLog,n=(0,P.Z)(r,B);return(0,t.jsxs)(D.Z,(0,p.Z)((0,p.Z)({width:800,destroyOnClose:!0,maskClosable:!1,forceRender:!1,footer:null},n),{},{children:[(0,t.jsxs)(u.ZP,{column:2,title:"\u64CD\u4F5C\u65E5\u5FD7\u8BE6\u7EC6\u4FE1\u606F",children:[(0,t.jsx)(u.ZP.Item,{label:"\u64CD\u4F5C\u4E1A\u52A1\u7F16\u53F7",children:a.bizId}),(0,t.jsx)(u.ZP.Item,{label:"\u64CD\u4F5C\u4E1A\u52A1\u7C7B\u578B",children:a.bizType}),(0,t.jsx)(u.ZP.Item,{label:"\u6807\u7B7E",children:a.tag}),(0,t.jsx)(u.ZP.Item,{label:"\u64CD\u4F5C\u4E1A\u52A1\u5185\u5BB9",children:a.message}),(0,t.jsx)(u.ZP.Item,{label:"\u64CD\u4F5C\u4E1A\u52A1\u9644\u52A0\u4FE1\u606F",children:a.extra}),(0,t.jsx)(u.ZP.Item,{label:"\u64CD\u4F5C\u7ED3\u679C\u72B6\u6001",valueEnum:{true:{text:"\u6210\u529F",status:"Success"},false:{text:"\u5931\u8D25",status:"Error"}},children:a.operationStatus}),(0,t.jsxs)(u.ZP.Item,{label:"\u64CD\u4F5C\u8017\u65F6",children:[a.executionTime,"\u79D2"]}),(0,t.jsx)(u.ZP.Item,{label:"\u64CD\u4F5C\u7528\u6237\u540D\u79F0",children:(o=a.user)===null||o===void 0?void 0:o.username})," ",(0,t.jsx)(u.ZP.Item,{label:"\u64CD\u4F5C\u7528\u6237\u5BA2\u6237\u7AEF IP \u5730\u5740",children:a.clientIp})," ",(0,t.jsx)(u.ZP.Item,{label:"\u64CD\u4F5C\u65F6\u95F4",valueType:"dateTime",children:a.createTime})," ",(0,t.jsx)(u.ZP.Item,{label:"\u8FD4\u56DE\u5185\u5BB9",valueType:"jsonCode",children:a.contentReturn})," ",(0,t.jsx)(u.ZP.Item,{label:"\u5F02\u5E38\u5185\u5BB9",valueType:"jsonCode",children:a.contentException})," "]})," "]}))},T=O,Z=e(91156),b=e(94256);function A(l,r){return f.apply(this,arguments)}function f(){return f=(0,L.Z)((0,d.Z)().mark(function l(r,o){return(0,d.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",b.Z.get(Z.By.operationLog,(0,p.Z)({params:r},o||{})));case 1:case"end":return n.stop()}},l)})),f.apply(this,arguments)}function R(l,r){return b.Z.post(Z.By.operationLogBatch,(0,p.Z)({data:l},r||{}))}var F={api:v},S=e(22806),M=e.n(S),z=function(){var r=(0,g.useRef)(),o=(0,g.useState)(!1),a=(0,x.Z)(o,2),n=a[0],j=a[1],$=(0,g.useState)({id:0,bizId:""}),I=(0,x.Z)($,2),H=I[0],V=I[1];return(0,t.jsxs)(y.Z,{routes:[{path:"/welcome",breadcrumbName:"\u9996\u9875"},{path:"",breadcrumbName:"\u7CFB\u7EDF\u7BA1\u7406"},{path:"/system/log",breadcrumbName:"\u7CFB\u7EDF\u64CD\u4F5C\u65E5\u5FD7\u5217\u8868"}],children:[" ",(0,t.jsx)(E.Z,{className:M()["operation-log-table"],customActionRef:r,customRequest:function(s){return F.api.queryOperationLogList(s)},customColumns:[{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"bizType",sorter:!0,ellipsis:!0},{title:"\u64CD\u4F5C\u7528\u6237",dataIndex:["user","username"],sorter:!0,ellipsis:!0},{title:"\u64CD\u4F5C\u7528\u6237 IP \u5730\u5740",dataIndex:"clientIp",sorter:!0,ellipsis:!0},{title:"\u64CD\u4F5C\u65F6\u95F4",dataIndex:"createTime",sorter:!0,ellipsis:!0,valueType:"dateRange",render:function(s,m){return(0,t.jsx)(t.Fragment,{children:m.createTime})}},{title:"\u64CD\u4F5C\u5185\u5BB9",dataIndex:"message",ellipsis:!0},{title:"\u64CD\u4F5C\u7ED3\u679C",dataIndex:"operationStatus",ellipsis:!0,sorter:!0,valueType:"select",valueEnum:{true:{text:"\u6210\u529F",status:"Success"},false:{text:"\u5931\u8D25",status:"Error"}}}],isOptionButtons:!1,batchRemoveEventHandler:function(){var c=(0,L.Z)((0,d.Z)().mark(function s(m){return(0,d.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,F.api.batchOperationLog({method:"DELETE",data:m});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},s)}));return function(s){return c.apply(this,arguments)}}(),onRow:function(s){return{onDoubleClick:function(){V(s),j(!0)}}}})," ",(0,t.jsx)(T,{operationLog:H,visible:n,onCancel:function(){return j(!1)}})," "]})},N=z}}]);
