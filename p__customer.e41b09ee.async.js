(self.webpackChunkphone_number_manager_frontend=self.webpackChunkphone_number_manager_frontend||[]).push([[76],{18731:function(oe){oe.exports={"license-plate-container":"license-plate-container___2dbl4","license-plate-select":"license-plate-select___3GxlX","license-plate-input":"license-plate-input___3RMLX"}},22412:function(oe){oe.exports={"phone-number-input":"phone-number-input___97On0"}},54803:function(oe,ne,e){"use strict";var L=e(11849),w=e(31199),S=e(85893),T=function(V){return(0,S.jsx)(w.Z,(0,L.Z)({width:"xl",min:0,fieldProps:{prefix:"\uFFE5",precision:2,formatter:function(o){return o.replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(o){return parseFloat(o==null?void 0:o.replace(/[\s,]/g,""))}},tooltip:"\u4FDD\u7559\u4E24\u4F4D\u5C0F\u6570"},V))};ne.Z=T},90907:function(oe,ne,e){"use strict";e.r(ne),e.d(ne,{default:function(){return Er}});var L={};e.r(L),e.d(L,{batchCustomer:function(){return cr},createCustomer:function(){return lr},downloadCustomerExcel:function(){return dr},exportCustomerExcel:function(){return mr},modifyCustomer:function(){return ir},patchCustomer:function(){return sr},patchCustomerMaintenance:function(){return vr},queryCustomer:function(){return ar},queryCustomerList:function(){return tr},queryCustomerMaintenanceList:function(){return fr},queryCustomerSelectList:function(){return ur},removeCustomer:function(){return or},uploadCustomerExcel:function(){return pr}});var w=e(20228),S=e(11382),T=e(62350),j=e(24565),V=e(57663),se=e(71577),o=e(11849),Ce=e(34792),C=e(48086),Z=e(2824),n=e(39428),p=e(3182),le=e(17462),te=e(76772),de=e(91896),fe=e(96822),ce=e(84787),pe=e(59962),q=e(45510),Ze=e(31199),K=e(64317),b=e(67294),r=e(85893),h=function(a){var u=(0,de.Z)({},a),c=(0,b.useState)(0),t=(0,Z.Z)(c,2),d=t[0],A=t[1],P=(0,b.useState)(0),y=(0,Z.Z)(P,2),R=y[0],f=y[1],X=(0,b.useState)(0),_=(0,Z.Z)(X,2),ee=_[0],I=_[1];return(0,b.useEffect)(function(){return I(d-R)},[d,R]),(0,r.jsxs)(pe.u,(0,o.Z)((0,o.Z)({min:1,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u4E00\u9879\u4FDD\u517B\u5957\u9910"},itemRender:function(N,J){var he=N.listDom,ie=N.action,O=J.record;return(0,r.jsx)(ce.ZP,{extra:ie,title:O==null?void 0:O.name,headStyle:{padding:0},bodyStyle:{padding:0},children:he})},initialValue:[{remainingCount:0}],copyIconProps:!1,deleteIconProps:{tooltipText:"\u5220\u9664\u4E0B\u5217\u4FDD\u517B\u5957\u9910"}},u),{},{children:[(0,r.jsx)(q.Z,{name:"startDate",label:"\u5F00\u59CB\u4EAB\u53D7\u65E5\u671F",width:"xl",placeholder:"\u8BF7\u9009\u62E9\u5F00\u59CB\u4EAB\u53D7\u65E5\u671F",fieldProps:{format:function(N){return N.format("YYYY-MM-DD")}},rules:[{required:!0,message:"\u5F00\u59CB\u4EAB\u53D7\u65E5\u671F\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,r.jsx)(Ze.Z,{name:"giftCount",label:"\u8D60\u9001\u6B21\u6570",min:0,max:65535,placeholder:"\u8BF7\u8F93\u5165\u8D60\u9001\u6B21\u6570",fieldProps:{precision:0,onChange:function(N){return A(N)}},rules:[{required:!0,message:"\u8D60\u9001\u6B21\u6570\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,r.jsx)(Ze.Z,{name:"usedCount",label:"\u5DF2\u7528\u6B21\u6570",min:0,max:d,initialValue:0,placeholder:"\u8BF7\u8F93\u5165\u5DF2\u7528\u6B21\u6570",fieldProps:{precision:0,value:R,onChange:function(N){return f(N)}},rules:[{required:!0,message:"\u5DF2\u7528\u6B21\u6570\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,r.jsx)(Ze.Z,{name:"remainingCount",label:"\u5269\u4F59\u6B21\u6570",min:0,max:d,disabled:!0,fieldProps:{precision:0,value:ee}}),(0,r.jsx)(K.Z,{name:"maintenanceId",label:"\u6240\u5C5E\u4FDD\u517B\u5957\u9910",placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u4FDD\u517B\u5957\u9910",request:(0,p.Z)((0,n.Z)().mark(function $(){return(0,n.Z)().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,fe.Z.api.queryMaintenanceSelectList();case 2:return J.abrupt("return",J.sent.data);case 3:case"end":return J.stop()}},$)})),rules:[{required:!0,message:"\u6240\u5C5E\u4FDD\u517B\u5957\u9910\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]})]}))},E=h,x=e(36256),m=e(47673),U=e(4107),me=e(9715),ge=e(71257),Q=e(952),ve=e(5966),g=e(18731),Fe=e.n(g),Ge=function(a){var u=a.name,c=a.provinceProps,t=a.numberProps,d=a.rules,A=a.label,P=ge.Z.useFormInstance(),y=(0,b.useState)(void 0),R=(0,Z.Z)(y,2),f=R[0],X=R[1],_=(0,b.useState)(void 0),ee=(0,Z.Z)(_,2),I=ee[0],$=ee[1],N=(0,b.useState)(void 0),J=(0,Z.Z)(N,2),he=J[0],ie=J[1],O=(0,b.useRef)(!1);return(0,b.useEffect)(function(){if(!(!u||O.current)){if(P.getFieldValue(u)){var W,Y;X((W=P.getFieldValue(u))===null||W===void 0?void 0:W.slice(0,1)),$((Y=P.getFieldValue(u))===null||Y===void 0?void 0:Y.slice(1))}else X(void 0),$(void 0);P.validateFields([u]).then(function(){return ie(void 0)}).catch(function(ue){return ie(ue.errorFields[0].errors[0])})}},[P.getFieldValue(u||"")]),(0,b.useEffect)(function(){if(!(!u||!f&&!I||!O.current)){var W="".concat(f||"").concat(I||"");P.setFieldValue(u,W),setTimeout(function(){P.validateFields([u]).then(function(){return ie(void 0)}).catch(function(Y){return ie(Y.errorFields[0].errors[0])})},0),O.current=!1}},[f,I]),(0,r.jsx)("div",{className:Fe()["license-plate-container"],children:(0,r.jsxs)(Q.ZP.Group,{size:0,title:(0,r.jsxs)(r.Fragment,{children:[d&&d.some(function(W){return"required"in W})&&(0,r.jsx)("span",{className:"text-red-500",children:"*"}),(0,r.jsx)("span",{className:"ml-0.5",children:A})]}),titleStyle:{fontWeight:"normal",marginBottom:"10px"},children:[(0,r.jsx)(K.Z,(0,o.Z)({placeholder:"\u7701\u4EFD",options:[{value:"\u4EAC",label:"\u4EAC"},{value:"\u6D25",label:"\u6D25"},{value:"\u6CAA",label:"\u6CAA"},{value:"\u6E1D",label:"\u6E1D"},{value:"\u5180",label:"\u5180"},{value:"\u8C6B",label:"\u8C6B"},{value:"\u4E91",label:"\u4E91"},{value:"\u8FBD",label:"\u8FBD"},{value:"\u9ED1",label:"\u9ED1"},{value:"\u6E58",label:"\u6E58"},{value:"\u7696",label:"\u7696"},{value:"\u9C81",label:"\u9C81"},{value:"\u65B0",label:"\u65B0"},{value:"\u82CF",label:"\u82CF"},{value:"\u6D59",label:"\u6D59"},{value:"\u8D63",label:"\u8D63"},{value:"\u9102",label:"\u9102"},{value:"\u6842",label:"\u6842"},{value:"\u7518",label:"\u7518"},{value:"\u664B",label:"\u664B"},{value:"\u8499",label:"\u8499"},{value:"\u9655",label:"\u9655"},{value:"\u5409",label:"\u5409"},{value:"\u95FD",label:"\u95FD"},{value:"\u8D35",label:"\u8D35"},{value:"\u7CA4",label:"\u7CA4"},{value:"\u9752",label:"\u9752"},{value:"\u85CF",label:"\u85CF"},{value:"\u5DDD",label:"\u5DDD"},{value:"\u5B81",label:"\u5B81"},{value:"\u743C",label:"\u743C"},{value:"\u4F7F",label:"\u4F7F"},{value:"\u9886",label:"\u9886"}],validateStatus:he?"error":void 0,help:he,onReset:function(){O.current=!1,X(void 0)},fieldProps:(0,o.Z)({className:Fe()["license-plate-select"],value:f,onChange:function(Y,ue){var re,ye;O.current=!0,c==null||(re=c.fieldProps)===null||re===void 0||(ye=re.onChange)===null||ye===void 0||ye.call(re,Y,ue),X(Y)}},c==null?void 0:c.fieldProps)},c)),(0,r.jsx)(ve.Z,(0,o.Z)({placeholder:"\u8BF7\u8F93\u5165\u8F66\u724C\u53F7\u7801",validateStatus:he?"error":void 0,onReset:function(){O.current=!1,$(void 0)},fieldProps:(0,o.Z)({className:Fe()["license-plate-input"],value:I,onChange:function(Y){var ue,re;O.current=!0,t==null||(ue=t.fieldProps)===null||ue===void 0||(re=ue.onChange)===null||re===void 0||re.call(ue,Y),$(Y.target.value.toUpperCase())}},t==null?void 0:t.fieldProps)},t)),(0,r.jsx)(Q.ZP.Item,{noStyle:!0,hidden:!0,name:u,rules:d,validateTrigger:["onBlur","onChange","onSubmit"],onReset:function(){O.current=!1,X(void 0),$(void 0),ie(void 0)},children:(0,r.jsx)(U.Z,{})})]})})},Xe=Ge,Je=e(37201),Ye=e(93224),ze=e(16110),Qe=e(22412),ke=e.n(Qe),qe=["creatorButtonText","listValidRejectMessage","phoneNumberFormProps"],_e=function(a){var u=a.creatorButtonText,c=a.listValidRejectMessage,t=a.phoneNumberFormProps,d=(0,Ye.Z)(a,qe);return(0,r.jsx)("div",{className:ke()["phone-number-input"],children:(0,r.jsxs)(pe.u,(0,o.Z)((0,o.Z)({creatorButtonProps:{creatorButtonText:u!=null?u:""},rules:[{validator:function(P,y){var R=c!=null?c:"\u8BF7\u6DFB\u52A0\u8054\u7CFB\u65B9\u5F0F\uFF01";return Array.isArray(y)&&y.length>0?Promise.resolve():Promise.reject(new Error(R))}}]},d),{},{children:[" ",(0,r.jsx)(ve.Z,(0,o.Z)({rules:[{required:!0,message:"\u8054\u7CFB\u65B9\u5F0F\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{validator:function(P,y){if(!y)return Promise.resolve();try{return(0,ze.h)(y,"CN").isValid()?Promise.resolve():Promise.reject(new Error("\u8054\u7CFB\u65B9\u5F0F\u8F93\u5165\u4E0D\u6B63\u786E\uFF01"))}catch(R){return Promise.reject(new Error("\u8054\u7CFB\u65B9\u5F0F\u8F93\u5165\u4E0D\u6B63\u786E\uFF01"))}}}]},t))," "]}))})},er=_e,rr=e(54803),nr=e(83617),Ue=e(72899),H=e(91156),G=e(94256);function tr(l,a){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",G.Z.get(H.Lx,(0,o.Z)({params:a},u||{})));case 1:case"end":return t.stop()}},l)})),Ee.apply(this,arguments)}function ar(l,a){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",G.Z.get("".concat(H.Lx,"/").concat(a),(0,o.Z)({},u||{})));case 1:case"end":return t.stop()}},l)})),Pe.apply(this,arguments)}function ur(l){return De.apply(this,arguments)}function De(){return De=(0,p.Z)((0,n.Z)().mark(function l(a){return(0,n.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",G.Z.get(H.tN,(0,o.Z)({},a||{})));case 1:case"end":return c.stop()}},l)})),De.apply(this,arguments)}function sr(l,a,u){return Be.apply(this,arguments)}function Be(){return Be=(0,p.Z)((0,n.Z)().mark(function l(a,u,c){return(0,n.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",G.Z.patch("".concat(H.Lx,"/").concat(a),(0,o.Z)({data:u},c||{})));case 1:case"end":return d.stop()}},l)})),Be.apply(this,arguments)}function lr(l,a){return we.apply(this,arguments)}function we(){return we=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",G.Z.post(H.Lx,(0,o.Z)({data:a},u||{})));case 1:case"end":return t.stop()}},l)})),we.apply(this,arguments)}function ir(l,a,u){return xe.apply(this,arguments)}function xe(){return xe=(0,p.Z)((0,n.Z)().mark(function l(a,u,c){return(0,n.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",G.Z.put("".concat(H.Lx,"/").concat(a),(0,o.Z)({data:u},c||{})));case 1:case"end":return d.stop()}},l)})),xe.apply(this,arguments)}function or(l,a){return Me.apply(this,arguments)}function Me(){return Me=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",G.Z.delete("".concat(H.Lx,"/").concat(a),(0,o.Z)({},u||{})));case 1:case"end":return t.stop()}},l)})),Me.apply(this,arguments)}function cr(l,a){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",G.Z.post(H._j,(0,o.Z)({data:a},u||{})));case 1:case"end":return t.stop()}},l)})),Ie.apply(this,arguments)}function pr(l,a,u){return je.apply(this,arguments)}function je(){return je=(0,p.Z)((0,n.Z)().mark(function l(a,u,c){var t;return(0,n.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return t=c||{},typeof a!="undefined"&&(t=(0,o.Z)((0,o.Z)({},c),{},{requestType:"form",data:a})),typeof u!="undefined"&&(t=(0,o.Z)((0,o.Z)({},t),{},{params:{importId:u}})),A.abrupt("return",G.Z.post(H.Lr,t));case 4:case"end":return A.stop()}},l)})),je.apply(this,arguments)}function mr(l,a){return Le.apply(this,arguments)}function Le(){return Le=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",G.Z.get(H.Nm,(0,o.Z)({params:{exportId:a}},u||{})));case 1:case"end":return t.stop()}},l)})),Le.apply(this,arguments)}function dr(l,a){return Se.apply(this,arguments)}function Se(){return Se=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",G.Z.get(H.ee,(0,o.Z)({params:{exportId:a},getResponse:!0,responseType:"blob"},u||{})));case 1:case"end":return t.stop()}},l)})),Se.apply(this,arguments)}function fr(l,a){return Ae.apply(this,arguments)}function Ae(){return Ae=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",G.Z.get(H.Oy,(0,o.Z)({params:a},u||{})));case 1:case"end":return t.stop()}},l)})),Ae.apply(this,arguments)}function vr(l,a,u){return Re.apply(this,arguments)}function Re(){return Re=(0,p.Z)((0,n.Z)().mark(function l(a,u,c){return(0,n.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",G.Z.patch("".concat(H.Oy,"/").concat(a,"/").concat(u),(0,o.Z)({},c||{})));case 1:case"end":return d.stop()}},l)})),Re.apply(this,arguments)}var ae={api:L},Ne=e(49684),We=e(68393),hr=e(64322),Zr=e(86615),gr=e(30381),yr=e.n(gr),Cr=e(72168),br=function(a,u,c,t,d){return(0,r.jsxs)(r.Fragment,{children:[d===null?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(te.Z,{message:d,type:"error",showIcon:!0,closable:!0,style:{marginBottom:20}})," ",(0,r.jsx)(ve.Z,{width:"xl",name:"name",label:"\u5BA2\u6237\u59D3\u540D",tooltip:"\u4E0D\u80FD\u8D85\u8FC710\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u59D3\u540D",rules:[{required:!0,message:"\u5BA2\u6237\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:10,message:"\u5BA2\u6237\u59D3\u540D\u4E0D\u80FD\u8D85\u8FC710\u4E2A\u5B57\u7B26\uFF01"}]})," ",(0,r.jsx)(Zr.Z.Group,{width:"xl",name:"gender",label:"\u5BA2\u6237\u6027\u522B",options:[{label:"\u7537",value:Ne.VX.MALE},{label:"\u5973",value:Ne.VX.FEMALE},{label:"\u672A\u77E5",value:Ne.VX.UNKNOWN}],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA2\u6237\u6027\u522B\uFF01"}]})," ",(0,r.jsx)(ve.Z,{width:"xl",name:"address",label:"\u5BA2\u6237\u9884\u7559\u5730\u5740",tooltip:"\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u9884\u7559\u5730\u5740",rules:[{required:!0,message:"\u5BA2\u6237\u9884\u7559\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:255,message:"\u5BA2\u6237\u9884\u7559\u5730\u5740\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26\uFF01"}]})," ",(0,r.jsx)(er,{name:"phoneNumbers",initialValue:[""],creatorButtonText:"\u6DFB\u52A0\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F",listValidRejectMessage:"\u8BF7\u6DFB\u52A0\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F\uFF01",phoneNumberFormProps:{name:"phoneNumber",label:"\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F"}})," ",(0,r.jsx)(rr.Z,{name:"price",label:"\u50A8\u503C\u4F59\u989D",placeholder:"\u8BF7\u8F93\u5165\u50A8\u503C\u4F59\u989D",rules:[{required:!0,message:"\u50A8\u503C\u4F59\u989D\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,r.jsx)(Xe,{name:"licensePlate",label:"\u8F66\u8F86\u53F7\u724C",rules:[{required:!0,message:"\u8F66\u8F86\u53F7\u724C\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{pattern:/^([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z][a-zA-Z](([DF]((?![IO])[a-zA-Z0-9](?![IO]))\d{4})|(\d{5}[DF]))|[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z][A-Z][A-Z0-9]{4}[A-Z0-9挂学警港澳])$/,message:"\u8F66\u8F86\u53F7\u724C\u4E0D\u6B63\u786E\uFF01"}]}),(0,r.jsx)(ve.Z,{width:"xl",name:"vehicleModel",label:"\u8F66\u578B",tooltip:"\u4E0D\u80FD\u8D85\u8FC710\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u8F66\u578B",rules:[{required:!0,message:"\u8F66\u578B\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:10,message:"\u8F66\u578B\u4E0D\u80FD\u8D85\u8FC710\u4E2A\u5B57\u7B26\uFF01"}]})," ",(0,r.jsx)(ve.Z,{width:"xl",name:"vin",label:"\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7",tooltip:"\u662F17\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7",rules:[{required:!0,message:"\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{validator:function(P,y){if(typeof y=="undefined"||y==="")return Promise.resolve();var R=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],f={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,J:1,K:2,L:3,M:4,N:5,P:7,R:9,S:2,T:3,U:4,V:5,W:6,X:7,Y:8,Z:9,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0};if(y.length!==17||/[IOQ]/.test(y))return Promise.reject(new Error("\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u6B63\u786E\uFF01"));for(var X=0,_=0;_<y.length;_++){var ee=y.charAt(_).toUpperCase();if(!(ee in f))return Promise.reject(new Error("\u5B57\u7B26 ".concat(ee," \u4E0D\u5728\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u6B63\u786E\uFF01")));X+=f[ee]*R[_]}var I=X%11,$=I===10?"X":I.toString(),N=y.charAt(8).toUpperCase();return $===N?Promise.resolve():Promise.reject(new Error("\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u6B63\u786E\uFF01"))}}]})," ",(0,r.jsx)(E,{name:"customerMaintenances"}),(0,r.jsx)(nr.Z,{width:"xl",name:"companyId",label:"\u6240\u5C5E\u5355\u4F4D",placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u5355\u4F4D",selectList:a,setSelectList:u,querySelectList:function(){var A=(0,p.Z)((0,n.Z)().mark(function P(y){return(0,n.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Ue.Z.api.queryCompanySelectList([y]);case 2:return f.abrupt("return",f.sent.data);case 3:case"end":return f.stop()}},P)}));return function(P){return A.apply(this,arguments)}}(),onChange:function(P){typeof P!="undefined"&&(0,p.Z)((0,n.Z)().mark(function y(){return(0,n.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.t0=t,f.next=3,We.Z.api.querySystemUserByCompanyId(P);case 3:return f.t1=f.sent.data,f.abrupt("return",(0,f.t0)(f.t1));case 5:case"end":return f.stop()}},y)}))()},rules:[{required:!0,message:"\u6240\u5C5E\u5355\u4F4D\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,r.jsx)(K.Z,{width:"xl",name:"userId",label:"\u6240\u5C5E\u7CFB\u7EDF\u7528\u6237",placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u7CFB\u7EDF\u7528\u6237",options:c,rules:[{required:!0,message:"\u6240\u5C5E\u7CFB\u7EDF\u7528\u6237\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]})]})},Fr=function(){var a=(0,Cr.tT)("@@initialState"),u=a.initialState,c=a.setInitialState,t=(0,b.useRef)(),d=(0,b.useRef)(),A=(0,b.useState)([]),P=(0,Z.Z)(A,2),y=P[0],R=P[1],f=(0,b.useState)([]),X=(0,Z.Z)(f,2),_=X[0],ee=X[1],I=(0,b.useRef)(),$=(0,b.useState)(!1),N=(0,Z.Z)($,2),J=N[0],he=N[1],ie=(0,b.useState)(""),O=(0,Z.Z)(ie,2),W=O[0],Y=O[1],ue=(0,b.useState)(null),re=(0,Z.Z)(ue,2),ye=re[0],Pr=re[1];(0,b.useEffect)(function(){(0,p.Z)((0,n.Z)().mark(function M(){return(0,n.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=R,i.next=3,Ue.Z.api.queryCompanySelectList([]);case 3:return i.t1=i.sent.data,i.abrupt("return",(0,i.t0)(i.t1));case 5:case"end":return i.stop()}},M)}))()},[]);var Ve=function(F){var i;return F.phoneNumbers=(i=F.phoneNumbers)===null||i===void 0?void 0:i.map(function(D){return D.phoneNumber}),F};return(0,r.jsx)(S.Z,{spinning:J,tip:W,children:(0,r.jsxs)(Je.Z,{routes:[{path:"/welcome",breadcrumbName:"\u9996\u9875"},{path:"",breadcrumbName:"\u5BA2\u6237\u7BA1\u7406"},{path:"/customer",breadcrumbName:"\u5BA2\u6237\u5217\u8868"}],children:[" ",(0,r.jsx)(x.Z,{customActionRef:t,customRequest:function(){var M=(0,p.Z)((0,n.Z)().mark(function F(i){return(0,n.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ae.api.queryCustomerList(i);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},F)}));return function(F){return M.apply(this,arguments)}}(),customColumns:[{title:"\u5BA2\u6237\u59D3\u540D",dataIndex:"name",sorter:!0,ellipsis:!0},{title:"\u5BA2\u6237\u6027\u522B",dataIndex:"gender",sorter:!0,ellipsis:!0,valueEnum:{0:{text:"\u5973"},1:{text:"\u7537"},2:{text:"\u672A\u77E5"}}},{title:"\u5BA2\u6237\u9884\u7559\u5730\u5740",dataIndex:"address",sorter:!0,ellipsis:!0},{title:"\u8054\u7CFB\u65B9\u5F0F",dataIndex:"phoneNumbers",ellipsis:!0,render:function(F,i){var D;return(0,r.jsx)(r.Fragment,{children:(D=i.phoneNumbers)===null||D===void 0?void 0:D.map(function(s,B){var k;return s+(B+1===((k=i.phoneNumbers)===null||k===void 0?void 0:k.length)?"":"\uFF0C")})})}},{title:"\u50A8\u503C\u4F59\u989D",dataIndex:"price",valueType:"money",sorter:!0,ellipsis:!0},{title:"\u8F66\u8F86\u53F7\u724C",dataIndex:"licensePlate",sorter:!0,ellipsis:!0},{title:"\u8F66\u578B",dataIndex:"vehicleModel",sorter:!0,ellipsis:!0},{title:"\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7",dataIndex:"vin",sorter:!0,ellipsis:!0},{title:"\u6240\u5C5E\u7528\u6237",dataIndex:["systemUser","username"],sorter:!0,ellipsis:!0,search:!1},{title:"\u6240\u5C5E\u5355\u4F4D",dataIndex:["company","name"],sorter:!0,ellipsis:!0,search:!1}],isOptionButtons:!0,batchRemoveEventHandler:function(){var M=(0,p.Z)((0,n.Z)().mark(function F(i){return(0,n.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ae.api.batchCustomer({method:"DELETE",data:i});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},F)}));return function(F){return M.apply(this,arguments)}}(),modalForm:{title:"\u5BA2\u6237",element:br(y,R,_,ee,ye),formRef:d,onCancel:function(){return Pr(null)},onCreateFinish:function(){var M=(0,p.Z)((0,n.Z)().mark(function i(D){var s,B;return(0,n.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,ae.api.createCustomer(Ve(D));case 2:return s=v.sent,s.code===200&&(I==null||(B=I.current)===null||B===void 0||B.reload()),v.abrupt("return",s);case 5:case"end":return v.stop()}},i)}));function F(i){return M.apply(this,arguments)}return F}(),onModifyFinish:function(){var M=(0,p.Z)((0,n.Z)().mark(function i(D){var s,B;return(0,n.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,ae.api.modifyCustomer(D.id,Ve(D));case 2:return s=v.sent,s.code===200&&(I==null||(B=I.current)===null||B===void 0||B.reload()),v.abrupt("return",s);case 5:case"end":return v.stop()}},i)}));function F(i){return M.apply(this,arguments)}return F}(),queryData:function(){var M=(0,p.Z)((0,n.Z)().mark(function i(D){var s,B;return(0,n.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,ae.api.queryCustomer(D);case 2:return B=v.sent,B.data.phoneNumbers=(s=B.data.phoneNumbers)===null||s===void 0?void 0:s.map(function($e){return{phoneNumber:$e}}),v.t0=ee,v.next=7,We.Z.api.querySystemUserByCompanyId(B.data.companyId);case 7:return v.t1=v.sent.data,(0,v.t0)(v.t1),v.abrupt("return",B);case 10:case"end":return v.stop()}},i)}));function F(i){return M.apply(this,arguments)}return F}()},removeData:function(){var M=(0,p.Z)((0,n.Z)().mark(function F(i){return(0,n.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ae.api.removeCustomer(i);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},F)}));return function(F){return M.apply(this,arguments)}}(),exportDataEventHandler:(0,p.Z)((0,n.Z)().mark(function M(){return(0,n.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,hr.lb)(he,Y,ae.api.exportCustomerExcel,ae.api.downloadCustomerExcel,["\u6B63\u5728\u751F\u6210\u5BA2\u6237\u4FE1\u606F\u4E2D...","\u751F\u6210\u6210\u529F\uFF0C\u6B63\u5728\u5F00\u542F\u4E0B\u8F7D...","\u6B63\u5728\u4E0B\u8F7D\u5BA2\u6237\u4FE1\u606F\u4E2D...","\u8BF7\u7B49\u5F85\u4E0B\u8F7D\u5B8C\u6210\uFF0C\u4E0B\u8F7D\u901F\u5EA6\u7531\u7F51\u7EDC\u901F\u5EA6\u51B3\u5B9A"],"\u50A8\u503C\u7EFC\u5408\u5206\u6790.xlsx"));case 1:case"end":return i.stop()}},M)})),expandable:{expandedRowRender:function(F){return(0,r.jsx)(x.Z,{isOptionButtons:!1,headerTitle:!1,search:!1,options:!1,pagination:!1,toolBarRender:!1,rowSelection:!1,actionRef:I,rowKey:function(D){return D.customerId.toString()+D.maintenanceId.toString()},customColumns:[{title:"\u4FDD\u517B\u5957\u9910\u540D\u79F0",dataIndex:["maintenance","name"],ellipsis:!0},{title:"\u8D60\u9001\u6B21\u6570",dataIndex:"giftCount",ellipsis:!0},{title:"\u5DF2\u4F7F\u7528\u6B21\u6570",dataIndex:"usedCount",ellipsis:!0},{title:"\u5269\u4F59\u6B21\u6570",dataIndex:"remainCount",ellipsis:!0,render:function(D,s){return s.giftCount-s.usedCount}},{title:"\u5F00\u59CB\u65E5\u671F",dataIndex:"startDate",ellipsis:!0,valueType:"date"},{title:"\u4F7F\u7528\u65F6\u95F4",dataIndex:"usageTime",ellipsis:!0,valueType:"dateTime"},{title:"\u64CD\u4F5C",valueType:"option",render:function(D,s){var B=s.customerId,k=s.maintenanceId,v=s.giftCount,$e=s.usedCount,Ke=s.startDate,Dr=s.maintenance;return(0,r.jsx)(j.Z,{title:"\u662F\u5426\u4F7F\u7528\u8BE5\u5957\u9910\uFF1F",onConfirm:(0,p.Z)((0,n.Z)().mark(function Br(){var be,Oe,He,Te;return(0,n.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!($e>=v)){z.next=3;break}return C.ZP.error("\u6B64\u4FDD\u517B\u5957\u9910\u5DF2\u4F7F\u7528\u5B8C"),z.abrupt("return");case 3:if(be=new Date,Oe=yr()(be),!Oe.isBefore(Ke)){z.next=8;break}return C.ZP.error("\u5F53\u524D\u65F6\u95F4\u672A\u5230\u8BE5\u4FDD\u517B\u5957\u9910\u7684\u670D\u52A1\u671F\u9650"),z.abrupt("return");case 8:if(!(Oe.diff(Ke,"days")>Dr.serviceDay)){z.next=11;break}return C.ZP.error("\u5F53\u524D\u65F6\u95F4\u5DF2\u8D85\u8FC7\u8BE5\u4FDD\u517B\u5957\u9910\u7684\u670D\u52A1\u671F\u9650"),z.abrupt("return");case 11:if(!(be.getTime()-u.useCarInfoMaintenanceInterval<3e3)){z.next=14;break}return C.ZP.error("\u64CD\u4F5C\u592A\u8FC7\u9891\u7E41\uFF0C3\u79D2\u540E\u518D\u8BD5"),z.abrupt("return");case 14:return z.next=16,ae.api.patchCustomerMaintenance(B!=null?B:"0",k!=null?k:"0");case 16:He=z.sent,He.code===200&&(C.ZP.success("\u4F7F\u7528\u6210\u529F"),(Te=I.current)===null||Te===void 0||Te.reload(),c((0,o.Z)((0,o.Z)({},u),{},{useCarInfoMaintenanceInterval:be.getTime()})));case 18:case"end":return z.stop()}},Br)})),okText:"\u662F",cancelText:"\u5426",children:(0,r.jsx)(se.Z,{type:"link",children:"\u4F7F\u7528"},"use_maintenance_button"+B.toString()+k.toString())},"use_maintenance_confirm"+B.toString()+k.toString())}}],customRequest:(0,p.Z)((0,n.Z)().mark(function i(){return(0,n.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ae.api.queryCustomerMaintenanceList({current:1,pageSize:100,params:{search:{customerId:F.id}}});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},i)}))})}}})," "]})})},Er=Fr},72899:function(oe,ne,e){"use strict";var L=e(73387);ne.Z={api:L}},96822:function(oe,ne,e){"use strict";e.d(ne,{Z:function(){return b}});var L={};e.r(L),e.d(L,{batchMaintenance:function(){return Ze},createMaintenance:function(){return te},modifyMaintenance:function(){return fe},patchMaintenance:function(){return p},queryMaintenance:function(){return Z},queryMaintenanceList:function(){return se},queryMaintenanceSelectList:function(){return Ce},removeMaintenance:function(){return pe}});var w=e(39428),S=e(11849),T=e(3182),j=e(91156),V=e(94256);function se(r,h){return o.apply(this,arguments)}function o(){return o=(0,T.Z)((0,w.Z)().mark(function r(h,E){return(0,w.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",V.Z.get(j.t7,(0,S.Z)({params:h},E||{})));case 1:case"end":return m.stop()}},r)})),o.apply(this,arguments)}function Ce(r){return C.apply(this,arguments)}function C(){return C=(0,T.Z)((0,w.Z)().mark(function r(h){return(0,w.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",V.Z.get(j.Ot,(0,S.Z)({},h||{})));case 1:case"end":return x.stop()}},r)})),C.apply(this,arguments)}function Z(r,h){return n.apply(this,arguments)}function n(){return n=(0,T.Z)((0,w.Z)().mark(function r(h,E){return(0,w.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",V.Z.get("".concat(j.t7,"/").concat(h),(0,S.Z)({},E||{})));case 1:case"end":return m.stop()}},r)})),n.apply(this,arguments)}function p(r,h,E){return le.apply(this,arguments)}function le(){return le=(0,T.Z)((0,w.Z)().mark(function r(h,E,x){return(0,w.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",V.Z.patch("".concat(j.t7,"/").concat(h),(0,S.Z)({data:E},x||{})));case 1:case"end":return U.stop()}},r)})),le.apply(this,arguments)}function te(r,h){return de.apply(this,arguments)}function de(){return de=(0,T.Z)((0,w.Z)().mark(function r(h,E){return(0,w.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",V.Z.post(j.t7,(0,S.Z)({data:h},E||{})));case 1:case"end":return m.stop()}},r)})),de.apply(this,arguments)}function fe(r,h,E){return ce.apply(this,arguments)}function ce(){return ce=(0,T.Z)((0,w.Z)().mark(function r(h,E,x){return(0,w.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",V.Z.put("".concat(j.t7,"/").concat(h),(0,S.Z)({data:E},x||{})));case 1:case"end":return U.stop()}},r)})),ce.apply(this,arguments)}function pe(r,h){return q.apply(this,arguments)}function q(){return q=(0,T.Z)((0,w.Z)().mark(function r(h,E){return(0,w.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",V.Z.delete("".concat(j.t7,"/").concat(h),(0,S.Z)({},E||{})));case 1:case"end":return m.stop()}},r)})),q.apply(this,arguments)}function Ze(r,h){return K.apply(this,arguments)}function K(){return K=(0,T.Z)((0,w.Z)().mark(function r(h,E){return(0,w.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",V.Z.post(j.Qk,(0,S.Z)({data:h},E||{})));case 1:case"end":return m.stop()}},r)})),K.apply(this,arguments)}var b={api:L}},64322:function(oe,ne,e){"use strict";e.d(ne,{lb:function(){return V},uA:function(){return o},Us:function(){return Ce}});var L=e(39428),w=e(34792),S=e(48086),T=e(3182),j=e(49684);function V(C,Z,n,p,le,te){return se.apply(this,arguments)}function se(){return se=(0,T.Z)((0,L.Z)().mark(function C(Z,n,p,le,te,de){var fe,ce,pe,q;return(0,L.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return n(te[0]),Z(!0),K.next=4,p();case 4:fe=K.sent,ce=fe.status,pe=fe.exportId,ce!==j.Jx.DONE&&(q=setInterval((0,T.Z)((0,L.Z)().mark(function b(){var r,h,E,x,m,U,me,ge,Q;return(0,L.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,p(pe);case 2:r=g.sent,h=r.code,E=r.status,h!==200&&(S.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Z(!1),clearInterval(q)),g.t0=E,g.next=g.t0===j.Jx.HANDLED?9:g.t0===j.Jx.DOWNLOAD?30:g.t0===j.Jx.DONE?32:g.t0===j.Jx.FAILED?36:40;break;case 9:return n(te[1]),g.next=12,le(pe);case 12:if(x=g.sent,m=x.data,U=x.response,!(typeof m.code=="undefined"&&m)){g.next=26;break}return me=U.headers.get("Content-Disposition"),me!==null?me=decodeURI(me.split("=")[1]).replaceAll('"',""):me=de,g.next=20,m;case 20:ge=g.sent,n(te[1]),Q=document.createElement("a"),"download"in Q?(Q.style.display="none",Q.href=URL.createObjectURL(ge),Q.download=me,document.body.appendChild(Q),Q.click(),URL.revokeObjectURL(Q.href),document.body.removeChild(Q)):navigator.msSaveBlob(ge,me),g.next=29;break;case 26:S.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Z(!1),clearInterval(q);case 29:return g.abrupt("break",41);case 30:return n(te[2]),g.abrupt("break",41);case 32:return n(te[3]),Z(!1),clearInterval(q),g.abrupt("break",41);case 36:return S.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Z(!1),clearInterval(q),g.abrupt("break",41);case 40:return g.abrupt("break",41);case 41:case"end":return g.stop()}},b)})),2e3));case 8:case"end":return K.stop()}},C)})),se.apply(this,arguments)}function o(C){var Z=["0"];return typeof C.companies!="undefined"&&C.companies!==null&&C.companies.length>0&&(Z=C.companies.map(function(n){return n.parentId})),Z}function Ce(C){if(C.current===null||!(C.current.offsetHeight||C.current.offsetWidth||C.current.getClientRects().length))return!1;var Z=C.current.getBoundingClientRect(),n=Z.height,p=Z.top,le=window.innerHeight||document.documentElement.clientHeight;return p<le&&p+n>0}}}]);
