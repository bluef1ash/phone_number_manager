(self.webpackChunkphone_number_manager_frontend=self.webpackChunkphone_number_manager_frontend||[]).push([[76],{18731:function(J){J.exports={"license-plate-container":"license-plate-container___2dbl4","license-plate-input":"license-plate-input___3RMLX"}},22412:function(J){J.exports={"phone-number-input":"phone-number-input___97On0"}},90907:function(J,Q,r){"use strict";r.r(Q),r.d(Q,{default:function(){return hr}});var T={};r.r(T),r.d(T,{batchCustomer:function(){return tr},createCustomer:function(){return _e},downloadCustomerExcel:function(){return ur},exportCustomerExcel:function(){return ar},modifyCustomer:function(){return er},patchCustomer:function(){return ke},patchCustomerMaintenance:function(){return ir},queryCustomer:function(){return Je},queryCustomerList:function(){return Qe},queryCustomerMaintenanceList:function(){return sr},queryCustomerSelectList:function(){return qe},removeCustomer:function(){return rr},uploadCustomerExcel:function(){return nr}});var x=r(20228),V=r(11382),H=r(62350),W=r(24565),K=r(57663),se=r(71577),o=r(11849),Me=r(34792),Y=r(48086),O=r(2824),a=r(39428),f=r(3182),ne=r(17462),ie=r(76772),_=r(91896),le=r(96822),ee=r(84787),ae=r(59962),re=r(45510),te=r(31199),q=r(64317),P=r(67294),e=r(85893),y=function(n){var i=(0,_.Z)({},n),c=(0,P.useState)(0),t=(0,O.Z)(c,2),d=t[0],M=t[1],N=(0,P.useState)(0),g=(0,O.Z)(N,2),b=g[0],z=g[1],h=(0,P.useState)(0),$=(0,O.Z)(h,2),U=$[0],B=$[1];return(0,P.useEffect)(function(){return B(d-b)},[d,b]),(0,e.jsxs)(ae.u,(0,o.Z)((0,o.Z)({min:1,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u4E00\u9879\u4FDD\u517B\u5957\u9910"},itemRender:function(E,A){var we=E.listDom,xe=E.action,k=A.record;return(0,e.jsx)(ee.ZP,{extra:xe,title:k==null?void 0:k.name,headStyle:{padding:0},bodyStyle:{padding:0},children:we})},initialValue:[{remainingCount:0}],copyIconProps:!1,deleteIconProps:{tooltipText:"\u5220\u9664\u4E0B\u5217\u4FDD\u517B\u5957\u9910"}},i),{},{children:[(0,e.jsx)(re.Z,{name:"startDate",label:"\u5F00\u59CB\u4EAB\u53D7\u65E5\u671F",width:"xl",fieldProps:{format:function(E){return E.format("YYYY-MM-DD")}},rules:[{required:!0,message:"\u5F00\u59CB\u4EAB\u53D7\u65E5\u671F\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,e.jsx)(te.Z,{name:"giftCount",label:"\u8D60\u9001\u6B21\u6570",min:0,max:65535,fieldProps:{precision:0,onChange:function(E){return M(E)}},rules:[{required:!0,message:"\u8D60\u9001\u6B21\u6570\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,e.jsx)(te.Z,{name:"usedCount",label:"\u5DF2\u7528\u6B21\u6570",min:0,max:d,initialValue:0,fieldProps:{precision:0,value:b,onChange:function(E){return z(E)}},rules:[{required:!0,message:"\u5DF2\u7528\u6B21\u6570\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,e.jsx)(te.Z,{name:"remainingCount",label:"\u5269\u4F59\u6B21\u6570",min:0,max:d,disabled:!0,fieldProps:{precision:0,value:U}}),(0,e.jsx)(q.Z,{name:"maintenanceId",label:"\u6240\u5C5E\u4FDD\u517B\u5957\u9910",request:(0,f.Z)((0,a.Z)().mark(function X(){return(0,a.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,le.Z.api.queryMaintenanceSelectList();case 2:return A.abrupt("return",A.sent.data);case 3:case"end":return A.stop()}},X)})),rules:[{required:!0,message:"\u6240\u5C5E\u4FDD\u517B\u5957\u9910\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]})]}))},w=y,I=r(44534),m=r(952),S=r(5966),Ae=r(18731),Be=r.n(Ae),Re=function(n){var i=n.name,c=n.formRef,t=n.provinceItemProps,d=n.provinceProps,M=n.numberItemProps,N=n.numberProps,g=(0,P.useState)(""),b=(0,O.Z)(g,2),z=b[0],h=b[1];return(0,P.useEffect)(function(){var $;return h(($=c.current)===null||$===void 0?void 0:$.getFieldValue([i,"number"]))},[]),(0,e.jsx)("div",{className:Be()["license-plate-container"],children:(0,e.jsxs)(m.ZP.Group,{size:0,title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{color:"red"},children:"*"})," ",(0,e.jsx)("span",{className:"ml-0.5",children:"\u8F66\u8F86\u53F7\u724C"})]}),titleStyle:{fontWeight:"normal",marginBottom:"10px"},children:[(0,e.jsx)(m.ZP.Item,(0,o.Z)((0,o.Z)({name:[i,"province"],shouldUpdate:!0},t),{},{children:(0,e.jsx)(q.Z,(0,o.Z)({width:70,placeholder:"\u7701\u4EFD",options:[{value:"\u4EAC",label:"\u4EAC"},{value:"\u6D25",label:"\u6D25"},{value:"\u6CAA",label:"\u6CAA"},{value:"\u6E1D",label:"\u6E1D"},{value:"\u5180",label:"\u5180"},{value:"\u8C6B",label:"\u8C6B"},{value:"\u4E91",label:"\u4E91"},{value:"\u8FBD",label:"\u8FBD"},{value:"\u9ED1",label:"\u9ED1"},{value:"\u6E58",label:"\u6E58"},{value:"\u7696",label:"\u7696"},{value:"\u9C81",label:"\u9C81"},{value:"\u65B0",label:"\u65B0"},{value:"\u82CF",label:"\u82CF"},{value:"\u6D59",label:"\u6D59"},{value:"\u8D63",label:"\u8D63"},{value:"\u9102",label:"\u9102"},{value:"\u6842",label:"\u6842"},{value:"\u7518",label:"\u7518"},{value:"\u664B",label:"\u664B"},{value:"\u8499",label:"\u8499"},{value:"\u9655",label:"\u9655"},{value:"\u5409",label:"\u5409"},{value:"\u95FD",label:"\u95FD"},{value:"\u8D35",label:"\u8D35"},{value:"\u7CA4",label:"\u7CA4"},{value:"\u9752",label:"\u9752"},{value:"\u85CF",label:"\u85CF"},{value:"\u5DDD",label:"\u5DDD"},{value:"\u5B81",label:"\u5B81"},{value:"\u743C",label:"\u743C"},{value:"\u4F7F",label:"\u4F7F"},{value:"\u9886",label:"\u9886"}]},d))})),(0,e.jsx)(m.ZP.Item,(0,o.Z)((0,o.Z)({name:[i,"number"],shouldUpdate:!0,className:Be()["license-plate-input"]},M),{},{children:(0,e.jsx)(S.Z,(0,o.Z)({placeholder:"\u8BF7\u8F93\u5165\u8F66\u8F86\u53F7\u724C",fieldProps:{value:z,onChange:function(U){return h(U.target.value.toUpperCase())}}},N))}))]})})},Te=Re,Oe=r(37201),Ue=r(93224),Ve=r(16110),We=r(96486),Ge=r(22412),Xe=r.n(Ge),He=["creatorButtonText","listValidRejectMessage","phoneNumberFormProps"],Ke=function(n){var i=n.creatorButtonText,c=n.listValidRejectMessage,t=n.phoneNumberFormProps,d=(0,Ue.Z)(n,He);return(0,e.jsx)("div",{className:Xe()["phone-number-input"],children:(0,e.jsxs)(ae.u,(0,o.Z)((0,o.Z)({creatorButtonProps:{creatorButtonText:typeof i=="undefined"?"":i},rules:[{validator:function(N,g){return typeof g!="undefined"&&(0,We.isArray)(g)&&g.length>0?Promise.resolve():Promise.reject(typeof c=="undefined"?c:"\u8BF7\u6DFB\u52A0\u8054\u7CFB\u65B9\u5F0F\uFF01")}}]},d),{},{children:[" ",(0,e.jsx)(S.Z,(0,o.Z)({rules:[{required:!0,message:"\u8054\u7CFB\u65B9\u5F0F\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{validator:function(N,g){try{return typeof g!="undefined"&&g.length>0&&(0,Ve.h)(g,"CN").isValid()?Promise.resolve():Promise.reject("\u8054\u7CFB\u65B9\u5F0F\u8F93\u5165\u4E0D\u6B63\u786E\uFF01")}catch(b){return Promise.reject("\u8054\u7CFB\u65B9\u5F0F\u8F93\u5165\u4E0D\u6B63\u786E\uFF01")}}}]},t))," "]}))})},Ye=Ke,ze=r(7506),Ee=r(72899),j=r(91156),L=r(94256);function Qe(s,n){return oe.apply(this,arguments)}function oe(){return oe=(0,f.Z)((0,a.Z)().mark(function s(n,i){return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",L.Z.get(j.Lx,(0,o.Z)({params:n},i||{})));case 1:case"end":return t.stop()}},s)})),oe.apply(this,arguments)}function Je(s,n){return ce.apply(this,arguments)}function ce(){return ce=(0,f.Z)((0,a.Z)().mark(function s(n,i){return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",L.Z.get("".concat(j.Lx,"/").concat(n),(0,o.Z)({},i||{})));case 1:case"end":return t.stop()}},s)})),ce.apply(this,arguments)}function qe(s){return pe.apply(this,arguments)}function pe(){return pe=(0,f.Z)((0,a.Z)().mark(function s(n){return(0,a.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",L.Z.get(j.tN,(0,o.Z)({},n||{})));case 1:case"end":return c.stop()}},s)})),pe.apply(this,arguments)}function ke(s,n,i){return me.apply(this,arguments)}function me(){return me=(0,f.Z)((0,a.Z)().mark(function s(n,i,c){return(0,a.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",L.Z.patch("".concat(j.Lx,"/").concat(n),(0,o.Z)({data:i},c||{})));case 1:case"end":return d.stop()}},s)})),me.apply(this,arguments)}function _e(s,n){return de.apply(this,arguments)}function de(){return de=(0,f.Z)((0,a.Z)().mark(function s(n,i){return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",L.Z.post(j.Lx,(0,o.Z)({data:n},i||{})));case 1:case"end":return t.stop()}},s)})),de.apply(this,arguments)}function er(s,n,i){return fe.apply(this,arguments)}function fe(){return fe=(0,f.Z)((0,a.Z)().mark(function s(n,i,c){return(0,a.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",L.Z.put("".concat(j.Lx,"/").concat(n),(0,o.Z)({data:i},c||{})));case 1:case"end":return d.stop()}},s)})),fe.apply(this,arguments)}function rr(s,n){return he.apply(this,arguments)}function he(){return he=(0,f.Z)((0,a.Z)().mark(function s(n,i){return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",L.Z.delete("".concat(j.Lx,"/").concat(n),(0,o.Z)({},i||{})));case 1:case"end":return t.stop()}},s)})),he.apply(this,arguments)}function tr(s,n){return ve.apply(this,arguments)}function ve(){return ve=(0,f.Z)((0,a.Z)().mark(function s(n,i){return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",L.Z.post(j._j,(0,o.Z)({data:n},i||{})));case 1:case"end":return t.stop()}},s)})),ve.apply(this,arguments)}function nr(s,n,i){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,f.Z)((0,a.Z)().mark(function s(n,i,c){var t;return(0,a.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return t=c||{},typeof n!="undefined"&&(t=(0,o.Z)((0,o.Z)({},c),{},{requestType:"form",data:n})),typeof i!="undefined"&&(t=(0,o.Z)((0,o.Z)({},t),{},{params:{importId:i}})),M.abrupt("return",L.Z.post(j.Lr,t));case 4:case"end":return M.stop()}},s)})),Ze.apply(this,arguments)}function ar(s,n){return ye.apply(this,arguments)}function ye(){return ye=(0,f.Z)((0,a.Z)().mark(function s(n,i){return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",L.Z.get(j.Nm,(0,o.Z)({params:{exportId:n}},i||{})));case 1:case"end":return t.stop()}},s)})),ye.apply(this,arguments)}function ur(s,n){return ge.apply(this,arguments)}function ge(){return ge=(0,f.Z)((0,a.Z)().mark(function s(n,i){return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",L.Z.get(j.ee,(0,o.Z)({params:{exportId:n},getResponse:!0,responseType:"blob"},i||{})));case 1:case"end":return t.stop()}},s)})),ge.apply(this,arguments)}function sr(s,n){return Ce.apply(this,arguments)}function Ce(){return Ce=(0,f.Z)((0,a.Z)().mark(function s(n,i){return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",L.Z.get(j.Oy,(0,o.Z)({params:n},i||{})));case 1:case"end":return t.stop()}},s)})),Ce.apply(this,arguments)}function ir(s,n,i){return be.apply(this,arguments)}function be(){return be=(0,f.Z)((0,a.Z)().mark(function s(n,i,c){return(0,a.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",L.Z.patch("".concat(j.Oy,"/").concat(n,"/").concat(i),(0,o.Z)({},c||{})));case 1:case"end":return d.stop()}},s)})),be.apply(this,arguments)}var G={api:T},Fe=r(49684),je=r(68393),lr=r(64322),or=r(86615),cr=r(30381),pr=r.n(cr),mr=r(72168),dr=function(n,i,c,t,d,M){return(0,e.jsxs)(e.Fragment,{children:[M===null?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(ie.Z,{message:M,type:"error",showIcon:!0,closable:!0,style:{marginBottom:20}})," ",(0,e.jsx)(S.Z,{width:"xl",name:"name",label:"\u5BA2\u6237\u59D3\u540D",tooltip:"\u4E0D\u80FD\u8D85\u8FC710\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u59D3\u540D",rules:[{required:!0,message:"\u5BA2\u6237\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:10,message:"\u5BA2\u6237\u59D3\u540D\u4E0D\u80FD\u8D85\u8FC710\u4E2A\u5B57\u7B26\uFF01"}]})," ",(0,e.jsx)(or.Z.Group,{width:"xl",name:"gender",label:"\u5BA2\u6237\u6027\u522B",options:[{label:"\u7537",value:Fe.VX.MALE},{label:"\u5973",value:Fe.VX.FEMALE},{label:"\u672A\u77E5",value:Fe.VX.UNKNOWN}],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA2\u6237\u6027\u522B\uFF01"}]})," ",(0,e.jsx)(S.Z,{width:"xl",name:"address",label:"\u5BA2\u6237\u9884\u7559\u5730\u5740",tooltip:"\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u9884\u7559\u5730\u5740",rules:[{required:!0,message:"\u5BA2\u6237\u9884\u7559\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:255,message:"\u5BA2\u6237\u9884\u7559\u5730\u5740\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26\uFF01"}]})," ",(0,e.jsx)(Ye,{name:"phoneNumbers",initialValue:[""],creatorButtonText:"\u6DFB\u52A0\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F",listValidRejectMessage:"\u8BF7\u6DFB\u52A0\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F\uFF01",phoneNumberFormProps:{name:"phoneNumber",label:"\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F"}})," ",(0,e.jsx)(Te,{name:"licensePlateInfo",formRef:n,provinceItemProps:{rules:[{required:!0,message:"\u7701\u4EFD\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},numberItemProps:{rules:[{required:!0,message:"\u8F66\u8F86\u53F7\u724C\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{pattern:/^([a-zA-Z](([DF]((?![IO])[a-zA-Z0-9](?![IO]))\d{4})|(\d{5}[DF]))|[A-Z][A-Z0-9]{4}[A-Z0-9挂学警港澳])$/,message:"\u8F66\u8F86\u53F7\u724C\u4E0D\u6B63\u786E\uFF01"}]}}),(0,e.jsx)(S.Z,{width:"xl",name:"vehicleModel",label:"\u8F66\u578B",tooltip:"\u4E0D\u80FD\u8D85\u8FC710\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u8F66\u578B",rules:[{required:!0,message:"\u8F66\u578B\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:10,message:"\u8F66\u578B\u4E0D\u80FD\u8D85\u8FC710\u4E2A\u5B57\u7B26\uFF01"}]})," ",(0,e.jsx)(S.Z,{width:"xl",name:"vin",label:"\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7",tooltip:"\u662F17\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7",rules:[{required:!0,message:"\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{validator:function(g,b){var z=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],h={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,J:1,K:2,L:3,M:4,N:5,P:7,R:9,S:2,T:3,U:4,V:5,W:6,X:7,Y:8,Z:9,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0};if(b.length!==17||/[IOQ]/.test(b))return Promise.reject(new Error("\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u6B63\u786E\uFF01"));for(var $=0,U=0;U<b.length;U++){var B=b.charAt(U).toUpperCase();if(!(B in h))return Promise.reject(new Error("\u5B57\u7B26 ".concat(B," \u4E0D\u5728\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u6B63\u786E\uFF01")));$+=h[B]*z[U]}var X=$%11,E=X===10?"X":X.toString(),A=b.charAt(8).toUpperCase();return E===A?Promise.resolve():Promise.reject(new Error("\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u6B63\u786E\uFF01"))}}]})," ",(0,e.jsx)(w,{name:"customerMaintenances"}),(0,e.jsx)(ze.Z,{name:"companyInfo",label:"\u6240\u5C5E\u5355\u4F4D",requiredMessage:"\u6240\u5C5E\u5355\u4F4D\u4E0D\u80FD\u4E3A\u7A7A\uFF01",selectList:i,setSelectList:c,querySelectList:function(){var N=(0,f.Z)((0,a.Z)().mark(function g(b){return(0,a.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,Ee.Z.api.queryCompanySelectList([b]);case 2:return h.abrupt("return",h.sent.data);case 3:case"end":return h.stop()}},g)}));return function(g){return N.apply(this,arguments)}}(),cascaderFieldProps:{onChange:function(g){typeof g!="undefined"&&(0,f.Z)((0,a.Z)().mark(function b(){return(0,a.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.t0=d,h.next=3,je.Z.api.querySystemUserByCompanyId(g);case 3:return h.t1=h.sent.data,h.abrupt("return",(0,h.t0)(h.t1));case 5:case"end":return h.stop()}},b)}))()}}}),(0,e.jsx)(q.Z,{name:"userId",label:"\u6240\u5C5E\u7CFB\u7EDF\u7528\u6237",options:t,rules:[{required:!0,message:"\u6240\u5C5E\u7CFB\u7EDF\u7528\u6237\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]})]})},fr=function(){var n=(0,mr.tT)("@@initialState"),i=n.initialState,c=n.setInitialState,t=(0,P.useRef)(),d=(0,P.useRef)(),M=(0,P.useState)([]),N=(0,O.Z)(M,2),g=N[0],b=N[1],z=(0,P.useState)([]),h=(0,O.Z)(z,2),$=h[0],U=h[1],B=(0,P.useRef)(),X=(0,P.useState)(!1),E=(0,O.Z)(X,2),A=E[0],we=E[1],xe=(0,P.useState)(""),k=(0,O.Z)(xe,2),vr=k[0],Zr=k[1],yr=(0,P.useState)(null),Le=(0,O.Z)(yr,2),gr=Le[0],Cr=Le[1];(0,P.useEffect)(function(){(0,f.Z)((0,a.Z)().mark(function F(){return(0,a.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=b,l.next=3,Ee.Z.api.queryCompanySelectList([]);case 3:l.t1=l.sent.data,(0,l.t0)(l.t1);case 5:case"end":return l.stop()}},F)}))()},[]);var De=function(p){var l;return p.userId=p.userInfo[p.userInfo.length-1],p.companyId=p.companyInfo[p.companyInfo.length-1],p.phoneNumbers=(l=p.phoneNumbers)===null||l===void 0?void 0:l.map(function(C){return C.phoneNumber}),p.licensePlate=p.licensePlateInfo.province+p.licensePlateInfo.number,p};return(0,e.jsx)(V.Z,{spinning:A,tip:vr,children:(0,e.jsxs)(Oe.Z,{routes:[{path:"/welcome",breadcrumbName:"\u9996\u9875"},{path:"",breadcrumbName:"\u5BA2\u6237\u7BA1\u7406"},{path:"/customer",breadcrumbName:"\u5BA2\u6237\u5217\u8868"}],children:[" ",(0,e.jsx)(I.Z,{customActionRef:t,customRequest:function(){var F=(0,f.Z)((0,a.Z)().mark(function p(l){return(0,a.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,G.api.queryCustomerList(l);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},p)}));return function(p){return F.apply(this,arguments)}}(),customColumns:[{title:"\u5BA2\u6237\u59D3\u540D",dataIndex:"name",sorter:!0,ellipsis:!0},{title:"\u5BA2\u6237\u6027\u522B",dataIndex:"gender",sorter:!0,ellipsis:!0,valueEnum:{0:{text:"\u5973"},1:{text:"\u7537"},2:{text:"\u672A\u77E5"}}},{title:"\u5BA2\u6237\u9884\u7559\u5730\u5740",dataIndex:"address",sorter:!0,ellipsis:!0},{title:"\u8054\u7CFB\u65B9\u5F0F",dataIndex:"phoneNumbers",ellipsis:!0,render:function(p,l){var C;return(0,e.jsx)(e.Fragment,{children:(C=l.phoneNumbers)===null||C===void 0?void 0:C.map(function(u,v){var R;return u+(v+1===((R=l.phoneNumbers)===null||R===void 0?void 0:R.length)?"":"\uFF0C")})})}},{title:"\u8F66\u8F86\u53F7\u724C",dataIndex:"licensePlate",sorter:!0,ellipsis:!0},{title:"\u8F66\u578B",dataIndex:"vehicleModel",sorter:!0,ellipsis:!0},{title:"\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7",dataIndex:"vin",sorter:!0,ellipsis:!0},{title:"\u6240\u5C5E\u7528\u6237",dataIndex:["systemUser","username"],sorter:!0,ellipsis:!0,search:!1},{title:"\u6240\u5C5E\u5355\u4F4D",dataIndex:["company","name"],sorter:!0,ellipsis:!0,search:!1}],isOptionButtons:!0,batchRemoveEventHandler:function(){var F=(0,f.Z)((0,a.Z)().mark(function p(l){return(0,a.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,G.api.batchCustomer({method:"DELETE",data:l});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},p)}));return function(p){return F.apply(this,arguments)}}(),modalForm:{title:"\u5BA2\u6237",element:dr(d,g,b,$,U,gr),formRef:d,onCancel:function(){return Cr(null)},onCreateFinish:function(){var F=(0,f.Z)((0,a.Z)().mark(function l(C){var u,v;return(0,a.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,G.api.createCustomer(De(C));case 2:return u=Z.sent,u.code===200&&(B==null||(v=B.current)===null||v===void 0||v.reload()),Z.abrupt("return",u);case 5:case"end":return Z.stop()}},l)}));function p(l){return F.apply(this,arguments)}return p}(),onModifyFinish:function(){var F=(0,f.Z)((0,a.Z)().mark(function l(C){var u,v;return(0,a.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,G.api.modifyCustomer(C.id,De(C));case 2:return u=Z.sent,u.code===200&&(B==null||(v=B.current)===null||v===void 0||v.reload()),Z.abrupt("return",u);case 5:case"end":return Z.stop()}},l)}));function p(l){return F.apply(this,arguments)}return p}(),queryData:function(){var F=(0,f.Z)((0,a.Z)().mark(function l(C){var u,v;return(0,a.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,G.api.queryCustomer(C);case 2:return v=Z.sent,v.data.phoneNumbers=(u=v.data.phoneNumbers)===null||u===void 0?void 0:u.map(function(Pe){return{phoneNumber:Pe}}),v.data.companyInfo=[v.data.companyId],v.data.userInfo=[v.data.userId],Z.t0=U,Z.next=9,je.Z.api.querySystemUserByCompanyId(v.data.companyId);case 9:return Z.t1=Z.sent.data,(0,Z.t0)(Z.t1),v.data.licensePlateInfo={province:v.data.licensePlate.slice(0,1),number:v.data.licensePlate.slice(1)},Z.abrupt("return",v);case 13:case"end":return Z.stop()}},l)}));function p(l){return F.apply(this,arguments)}return p}()},removeData:function(){var F=(0,f.Z)((0,a.Z)().mark(function p(l){return(0,a.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,G.api.removeCustomer(l);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},p)}));return function(p){return F.apply(this,arguments)}}(),exportDataEventHandler:(0,f.Z)((0,a.Z)().mark(function F(){return(0,a.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,lr.lb)(we,Zr,G.api.exportCustomerExcel,G.api.downloadCustomerExcel,["\u6B63\u5728\u751F\u6210\u5BA2\u6237\u4FE1\u606F\u4E2D...","\u751F\u6210\u6210\u529F\uFF0C\u6B63\u5728\u5F00\u542F\u4E0B\u8F7D...","\u6B63\u5728\u4E0B\u8F7D\u5BA2\u6237\u4FE1\u606F\u4E2D...","\u8BF7\u7B49\u5F85\u4E0B\u8F7D\u5B8C\u6210\uFF0C\u4E0B\u8F7D\u901F\u5EA6\u7531\u7F51\u7EDC\u901F\u5EA6\u51B3\u5B9A"],"\u50A8\u503C\u7EFC\u5408\u5206\u6790.xlsx"));case 1:case"end":return l.stop()}},F)})),expandable:{expandedRowRender:function(p){return(0,e.jsx)(I.Z,{isOptionButtons:!1,headerTitle:!1,search:!1,options:!1,pagination:!1,toolBarRender:!1,rowSelection:!1,actionRef:B,rowKey:function(C){return C.customerId.toString()+C.maintenanceId.toString()},customColumns:[{title:"\u4FDD\u517B\u5957\u9910\u540D\u79F0",dataIndex:["maintenance","name"],ellipsis:!0},{title:"\u8D60\u9001\u6B21\u6570",dataIndex:"giftCount",ellipsis:!0},{title:"\u5DF2\u4F7F\u7528\u6B21\u6570",dataIndex:"usedCount",ellipsis:!0},{title:"\u5269\u4F59\u6B21\u6570",dataIndex:"remainCount",ellipsis:!0,render:function(C,u){return u.giftCount-u.usedCount}},{title:"\u5F00\u59CB\u65E5\u671F",dataIndex:"startDate",ellipsis:!0,valueType:"date"},{title:"\u4F7F\u7528\u65F6\u95F4",dataIndex:"usageTime",ellipsis:!0,valueType:"dateTime"},{title:"\u64CD\u4F5C",valueType:"option",render:function(C,u){var v=u.customerId,R=u.maintenanceId,Z=u.giftCount,Pe=u.usedCount,Ne=u.startDate,br=u.maintenance;return(0,e.jsx)(W.Z,{title:"\u662F\u5426\u4F7F\u7528\u8BE5\u5957\u9910\uFF1F",onConfirm:(0,f.Z)((0,a.Z)().mark(function Fr(){var ue,Ie,$e,Se;return(0,a.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(Pe>=Z)){D.next=3;break}return Y.ZP.error("\u6B64\u4FDD\u517B\u5957\u9910\u5DF2\u4F7F\u7528\u5B8C"),D.abrupt("return");case 3:if(ue=new Date,Ie=pr()(ue),!Ie.isBefore(Ne)){D.next=8;break}return Y.ZP.error("\u5F53\u524D\u65F6\u95F4\u672A\u5230\u8BE5\u4FDD\u517B\u5957\u9910\u7684\u670D\u52A1\u671F\u9650"),D.abrupt("return");case 8:if(!(Ie.diff(Ne,"days")>br.serviceDay)){D.next=11;break}return Y.ZP.error("\u5F53\u524D\u65F6\u95F4\u5DF2\u8D85\u8FC7\u8BE5\u4FDD\u517B\u5957\u9910\u7684\u670D\u52A1\u671F\u9650"),D.abrupt("return");case 11:if(!(ue.getTime()-i.useCarInfoMaintenanceInterval<3e3)){D.next=14;break}return Y.ZP.error("\u64CD\u4F5C\u592A\u8FC7\u9891\u7E41\uFF0C3\u79D2\u540E\u518D\u8BD5"),D.abrupt("return");case 14:return D.next=16,G.api.patchCustomerMaintenance(v!=null?v:"0",R!=null?R:"0");case 16:$e=D.sent,$e.code===200&&(Y.ZP.success("\u4F7F\u7528\u6210\u529F"),(Se=B.current)===null||Se===void 0||Se.reload(),c((0,o.Z)((0,o.Z)({},i),{},{useCarInfoMaintenanceInterval:ue.getTime()})));case 18:case"end":return D.stop()}},Fr)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(se.Z,{type:"link",children:"\u4F7F\u7528"},"use_maintenance_button"+v.toString()+R.toString())},"use_maintenance_confirm"+v.toString()+R.toString())}}],customRequest:(0,f.Z)((0,a.Z)().mark(function l(){return(0,a.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,G.api.queryCustomerMaintenanceList({current:1,pageSize:100,params:{search:{customerId:p.id}}});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},l)}))})}}})," "]})})},hr=fr},72899:function(J,Q,r){"use strict";var T=r(73387);Q.Z={api:T}},96822:function(J,Q,r){"use strict";r.d(Q,{Z:function(){return P}});var T={};r.r(T),r.d(T,{batchMaintenance:function(){return te},createMaintenance:function(){return ie},modifyMaintenance:function(){return le},patchMaintenance:function(){return f},queryMaintenance:function(){return O},queryMaintenanceList:function(){return se},queryMaintenanceSelectList:function(){return Me},removeMaintenance:function(){return ae}});var x=r(39428),V=r(11849),H=r(3182),W=r(91156),K=r(94256);function se(e,y){return o.apply(this,arguments)}function o(){return o=(0,H.Z)((0,x.Z)().mark(function e(y,w){return(0,x.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",K.Z.get(W.t7,(0,V.Z)({params:y},w||{})));case 1:case"end":return m.stop()}},e)})),o.apply(this,arguments)}function Me(e){return Y.apply(this,arguments)}function Y(){return Y=(0,H.Z)((0,x.Z)().mark(function e(y){return(0,x.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",K.Z.get(W.Ot,(0,V.Z)({},y||{})));case 1:case"end":return I.stop()}},e)})),Y.apply(this,arguments)}function O(e,y){return a.apply(this,arguments)}function a(){return a=(0,H.Z)((0,x.Z)().mark(function e(y,w){return(0,x.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",K.Z.get("".concat(W.t7,"/").concat(y),(0,V.Z)({},w||{})));case 1:case"end":return m.stop()}},e)})),a.apply(this,arguments)}function f(e,y,w){return ne.apply(this,arguments)}function ne(){return ne=(0,H.Z)((0,x.Z)().mark(function e(y,w,I){return(0,x.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",K.Z.patch("".concat(W.t7,"/").concat(y),(0,V.Z)({data:w},I||{})));case 1:case"end":return S.stop()}},e)})),ne.apply(this,arguments)}function ie(e,y){return _.apply(this,arguments)}function _(){return _=(0,H.Z)((0,x.Z)().mark(function e(y,w){return(0,x.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",K.Z.post(W.t7,(0,V.Z)({data:y},w||{})));case 1:case"end":return m.stop()}},e)})),_.apply(this,arguments)}function le(e,y,w){return ee.apply(this,arguments)}function ee(){return ee=(0,H.Z)((0,x.Z)().mark(function e(y,w,I){return(0,x.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",K.Z.put("".concat(W.t7,"/").concat(y),(0,V.Z)({data:w},I||{})));case 1:case"end":return S.stop()}},e)})),ee.apply(this,arguments)}function ae(e,y){return re.apply(this,arguments)}function re(){return re=(0,H.Z)((0,x.Z)().mark(function e(y,w){return(0,x.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",K.Z.delete("".concat(W.t7,"/").concat(y),(0,V.Z)({},w||{})));case 1:case"end":return m.stop()}},e)})),re.apply(this,arguments)}function te(e,y){return q.apply(this,arguments)}function q(){return q=(0,H.Z)((0,x.Z)().mark(function e(y,w){return(0,x.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",K.Z.post(W.Qk,(0,V.Z)({data:y},w||{})));case 1:case"end":return m.stop()}},e)})),q.apply(this,arguments)}var P={api:T}},68393:function(J,Q,r){"use strict";var T=r(14695);Q.Z={api:T}}}]);
