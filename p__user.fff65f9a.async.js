(self.webpackChunkphone_number_manager_frontend=self.webpackChunkphone_number_manager_frontend||[]).push([[532],{73141:function(H,C,s){"use strict";s.r(C);var b=s(77576),k=s(12028),K=s(34792),g=s(48086),p=s(11849),t=s(39428),A=s(86582),o=s(3182),S=s(2824),l=s(36256),m=s(37201),d=s(83617),v=s(30859),y=s(72899),_=s(68393),N=s(64322),W=s(53776),D=s(67294),E=s(85893),P=function(){var Z=(0,W.t)("@@initialState"),w=Z.initialState,B=(0,D.useRef)(),$=(0,D.useRef)(),F=(0,D.useState)([]),L=(0,S.Z)(F,2),M=L[0],U=L[1],h=(0,D.useState)(!1),R=(0,S.Z)(h,2),c=R[0],J=R[1];return(0,D.useEffect)(function(){(0,o.Z)((0,t.Z)().mark(function r(){return(0,t.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=U,e.t1=[{label:"\u65E0",title:"\u65E0",value:"0"}],e.t2=A.Z,e.next=5,y.Z.api.queryCompanySelectList((0,N.uA)(w==null?void 0:w.currentUser));case 5:return e.t3=e.sent.data,e.t4=(0,e.t2)(e.t3),e.t5=e.t1.concat.call(e.t1,e.t4),e.abrupt("return",(0,e.t0)(e.t5));case 9:case"end":return e.stop()}},r)}))()},[]),(0,E.jsxs)(m.Z,{routes:[{path:"/welcome",breadcrumbName:"\u9996\u9875"},{path:"",breadcrumbName:"\u7CFB\u7EDF\u7BA1\u7406"},{path:"/system/user",breadcrumbName:"\u7CFB\u7EDF\u7528\u6237\u5217\u8868"}],children:[(0,E.jsx)(l.Z,{customActionRef:B,customRequest:function(){var r=(0,o.Z)((0,t.Z)().mark(function u(e){return(0,t.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_.Z.api.querySystemUserList(e);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},u)}));return function(u){return r.apply(this,arguments)}}(),customColumns:[{title:"\u7CFB\u7EDF\u7528\u6237\u540D\u79F0",dataIndex:"username",sorter:!0,ellipsis:!0},{title:"\u7CFB\u7EDF\u7528\u6237\u767B\u5F55\u65F6\u95F4",dataIndex:"loginTime",sorter:!0,valueType:"dateTime",ellipsis:!0,search:!1,render:function(u,e){return e.loginTime==="1000-01-01 00:00:00"?"\u672A\u767B\u5F55":e.loginTime}},{title:"\u7CFB\u7EDF\u7528\u6237\u767B\u5F55IP\u5730\u5740",dataIndex:"loginIp",sorter:!0,ellipsis:!0},{title:"\u7CFB\u7EDF\u7528\u6237\u662F\u5426\u88AB\u9501\u5B9A",dataIndex:"isLocked",sorter:!0,ellipsis:!0,render:function(u,e){return(0,E.jsx)(k.Z,{checked:e.isLocked,onChange:function(){var i=(0,o.Z)((0,t.Z)().mark(function a(n){var O,T,j,I;return(0,t.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,_.Z.api.modifySystemUser(e.id,(0,p.Z)((0,p.Z)({},e),{},{isLocked:n}));case 2:O=f.sent,T=O.code,j=O.message,T===200?(e.isLocked=n,I="\u89E3\u9501",n&&(I="\u9501\u5B9A"),g.ZP.success(I+"\u6210\u529F\uFF01")):g.ZP.error(j);case 6:case"end":return f.stop()}},a)}));return function(a){return i.apply(this,arguments)}}()})},search:!1},{title:"\u7CFB\u7EDF\u7528\u6237\u662F\u5426\u542F\u7528",dataIndex:"isEnabled",sorter:!0,ellipsis:!0,render:function(u,e){return(0,E.jsx)(k.Z,{checked:e.isEnabled,onChange:function(){var i=(0,o.Z)((0,t.Z)().mark(function a(n){var O,T,j,I;return(0,t.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,_.Z.api.modifySystemUser(e.id,(0,p.Z)((0,p.Z)({},e),{},{isEnabled:n}));case 2:O=f.sent,T=O.code,j=O.message,T===200?(I="\u7981\u7528",n&&(I="\u542F\u7528"),g.ZP.success(I+"\u6210\u529F\uFF01")):g.ZP.error(j);case 6:case"end":return f.stop()}},a)}));return function(a){return i.apply(this,arguments)}}()})},search:!1},{title:"\u7CFB\u7EDF\u7528\u6237\u6240\u5C5E\u5355\u4F4D",dataIndex:"companyId",ellipsis:!0,sorter:!0,render:function(u,e){var i,a="\u65E0";return((i=e.companies)===null||i===void 0?void 0:i.length)>0&&(a=e.companies.map(function(n){return n.name}).join("\uFF0C")),a},renderFormItem:function(){return(0,E.jsx)(d.Z,{querySelectList:function(){var u=(0,o.Z)((0,t.Z)().mark(function e(i){return(0,t.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.Z.api.queryCompanySelectList([i]);case 2:return n.abrupt("return",n.sent.data);case 3:case"end":return n.stop()}},e)}));return function(e){return u.apply(this,arguments)}}(),selectList:M,setSelectList:U,multiple:!0})}}],isOptionButtons:!0,batchRemoveEventHandler:function(){var r=(0,o.Z)((0,t.Z)().mark(function u(e){return(0,t.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_.Z.api.batchSystemUser({method:"DELETE",data:e});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},u)}));return function(u){return r.apply(this,arguments)}}(),modalForm:{title:"\u7CFB\u7EDF\u7528\u6237",element:(0,E.jsx)(v.Z,{companySelectList:M,setCompanySelectList:U,isSelf:!1,isModify:c}),formRef:$,onCreateFinish:function(){var r=(0,o.Z)((0,t.Z)().mark(function e(i){return(0,t.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_.Z.api.createSystemUser(i);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},e)}));function u(e){return r.apply(this,arguments)}return u}(),onModifyFinish:function(){var r=(0,o.Z)((0,t.Z)().mark(function e(i){return(0,t.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return J(!1),n.next=3,_.Z.api.modifySystemUser(i.id,i);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},e)}));function u(e){return r.apply(this,arguments)}return u}(),queryData:function(){var r=(0,o.Z)((0,t.Z)().mark(function e(i){return(0,t.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_.Z.api.querySystemUser(i);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},e)}));function u(e){return r.apply(this,arguments)}return u}()},removeData:function(){var r=(0,o.Z)((0,t.Z)().mark(function u(e){return(0,t.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_.Z.api.removeSystemUser(e);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},u)}));return function(u){return r.apply(this,arguments)}}()})," "]})};C.default=P},72899:function(H,C,s){"use strict";var b=s(73387);C.Z={api:b}},64322:function(H,C,s){"use strict";s.d(C,{lb:function(){return t},uA:function(){return o},Us:function(){return S}});var b=s(39428),k=s(34792),K=s(48086),g=s(3182),p=s(49684);function t(l,m,d,v,y,_){return A.apply(this,arguments)}function A(){return A=(0,g.Z)((0,b.Z)().mark(function l(m,d,v,y,_,N){var W,D,E,P;return(0,b.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return d(_[0]),m(!0),Z.next=4,v();case 4:W=Z.sent,D=W.status,E=W.exportId,D!==p.Jx.DONE&&(P=setInterval((0,g.Z)((0,b.Z)().mark(function w(){var B,$,F,L,M,U,h,R,c;return(0,b.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v(E);case 2:B=r.sent,$=B.code,F=B.status,$!==200&&(K.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),m(!1),clearInterval(P)),r.t0=F,r.next=r.t0===p.Jx.HANDLED?9:r.t0===p.Jx.DOWNLOAD?30:r.t0===p.Jx.DONE?32:r.t0===p.Jx.FAILED?36:40;break;case 9:return d(_[1]),r.next=12,y(E);case 12:if(L=r.sent,M=L.data,U=L.response,!(typeof M.code=="undefined"&&M)){r.next=26;break}return h=U.headers.get("Content-Disposition"),h!==null?h=decodeURI(h.split("=")[1]).replaceAll('"',""):h=N,r.next=20,M;case 20:R=r.sent,d(_[1]),c=document.createElement("a"),"download"in c?(c.style.display="none",c.href=URL.createObjectURL(R),c.download=h,document.body.appendChild(c),c.click(),URL.revokeObjectURL(c.href),document.body.removeChild(c)):navigator.msSaveBlob(R,h),r.next=29;break;case 26:K.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),m(!1),clearInterval(P);case 29:return r.abrupt("break",41);case 30:return d(_[2]),r.abrupt("break",41);case 32:return d(_[3]),m(!1),clearInterval(P),r.abrupt("break",41);case 36:return K.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),m(!1),clearInterval(P),r.abrupt("break",41);case 40:return r.abrupt("break",41);case 41:case"end":return r.stop()}},w)})),2e3));case 8:case"end":return Z.stop()}},l)})),A.apply(this,arguments)}function o(l){var m=["0"];return typeof l.companies!="undefined"&&l.companies!==null&&l.companies.length>0&&(m=l.companies.map(function(d){return d.parentId})),m}function S(l){if(l.current===null||!(l.current.offsetHeight||l.current.offsetWidth||l.current.getClientRects().length))return!1;var m=l.current.getBoundingClientRect(),d=m.height,v=m.top,y=window.innerHeight||document.documentElement.clientHeight;return v<y&&v+d>0}}}]);
