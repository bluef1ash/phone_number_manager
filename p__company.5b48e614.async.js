(self.webpackChunkphone_number_manager_frontend=self.webpackChunkphone_number_manager_frontend||[]).push([[726],{38763:function(S,M,r){"use strict";r.r(M);var v=r(86582),j=r(2824),s=r(39428),f=r(3182),I=r(36256),k=r(37201),A=r(83617),b=r(72899),K=r(53585),m=r(64322),o=r(53776),E=r(5966),d=r(67294),h=r(85893),O=function(R,g,Z,$,P){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(E.Z,{width:"xl",name:"name",label:"\u5355\u4F4D\u540D\u79F0",tooltip:"\u4E0D\u80FD\u8D85\u8FC720\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u5355\u4F4D\u540D\u79F0",rules:[{required:!0,message:"\u5355\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:20,message:"\u5355\u4F4D\u540D\u79F0\u4E0D\u80FD\u8D85\u8FC720\u4E2A\u5B57\u7B26\uFF01"}]})," ",(0,h.jsx)(A.Z,{width:"xl",name:"parentId",label:"\u4E0A\u7EA7\u5355\u4F4D",placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u5355\u4F4D",querySelectList:function(){var y=(0,f.Z)((0,s.Z)().mark(function c(l){return(0,s.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.Z.api.queryCompanySelectList([l]);case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}},c)}));return function(c){return y.apply(this,arguments)}}(),selectList:R,setSelectList:g,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u5355\u4F4D\uFF01"},{validator:function(c,l){return typeof P!="undefined"&&P!=="0"&&P===l[l.length-1]?Promise.reject(new Error("\u4E0A\u7EA7\u7F16\u53F7\u4E0D\u80FD\u4E3A\u81EA\u8EAB\uFF01")):Promise.resolve()}}]})," ",(0,h.jsx)(A.Z,{width:"xl",name:"systemPermissionSelectList",label:"\u5355\u4F4D\u6240\u5C5E\u6743\u9650",placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D\u6240\u5C5E\u6743\u9650",querySelectList:function(){var y=(0,f.Z)((0,s.Z)().mark(function c(l){return(0,s.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.Z.api.querySystemPermissionSelectList([l]);case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}},c)}));return function(c){return y.apply(this,arguments)}}(),selectList:Z,setSelectList:$,multiple:!0,exclusiveValue:"0",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5355\u4F4D\u6240\u5C5E\u6743\u9650\uFF01"},{validator:function(c,l){return l&&l.length>1&&l.some(function(L){return L[0]===0})?Promise.reject(new Error("\u5355\u4F4D\u6240\u5C5E\u6743\u9650\u4E0D\u80FD\u540C\u65F6\u9009\u62E9\u7CFB\u7EDF\u6743\u9650\u548C\u65E0\u6743\u9650\uFF01")):Promise.resolve()}}]})," "]})},H=function(){var R=(0,o.t)("@@initialState"),g=R.initialState,Z=(0,d.useRef)(),$=(0,d.useRef)(),P=(0,d.useState)([]),y=(0,j.Z)(P,2),c=y[0],l=y[1],L=(0,d.useState)([]),t=(0,j.Z)(L,2),w=t[0],F=t[1],C=(0,d.useState)(void 0),B=(0,j.Z)(C,2),D=B[0],T=B[1];(0,d.useEffect)(function(){(0,f.Z)((0,s.Z)().mark(function _(){var a,u;return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[{label:"\u65E0",title:"\u65E0",value:"0"}],u=(0,m.uA)(g==null?void 0:g.currentUser),e.t0=l,e.t1=[],e.t2=a,e.t3=v.Z,e.next=8,b.Z.api.queryCompanySelectList(u);case 8:return e.t4=e.sent.data,e.t5=(0,e.t3)(e.t4),e.t6=e.t1.concat.call(e.t1,e.t2,e.t5),(0,e.t0)(e.t6),e.t7=F,e.t8=[],e.t9=a,e.t10=v.Z,e.next=18,K.Z.api.querySystemPermissionSelectList(["0"]);case 18:e.t11=e.sent.data,e.t12=(0,e.t10)(e.t11),e.t13=e.t8.concat.call(e.t8,e.t9,e.t12),(0,e.t7)(e.t13);case 22:case"end":return e.stop()}},_)}))()},[]);var n=function(a){var u;return a.systemPermissions=(u=a.systemPermissionSelectList)===null||u===void 0?void 0:u.map(function(p){return{id:p}}),console.log(a),a};return(0,h.jsxs)(k.Z,{routes:[{path:"/welcome",breadcrumbName:"\u9996\u9875"},{path:"",breadcrumbName:"\u5355\u4F4D\u7BA1\u7406"},{path:"/company",breadcrumbName:"\u5355\u4F4D\u5217\u8868"}],children:[" ",(0,h.jsx)(I.Z,{customActionRef:Z,customRequest:function(){var _=(0,f.Z)((0,s.Z)().mark(function a(u){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Z.api.queryCompanyList(u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},a)}));return function(a){return _.apply(this,arguments)}}(),customColumns:[{title:"\u5355\u4F4D\u540D\u79F0",dataIndex:"name",sorter:!0,ellipsis:!0}],isOptionButtons:!0,batchRemoveEventHandler:function(){var _=(0,f.Z)((0,s.Z)().mark(function a(u){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Z.api.batchCompany({method:"DELETE",data:u});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},a)}));return function(a){return _.apply(this,arguments)}}(),modalForm:{title:"\u5355\u4F4D",element:O(c,l,w,F,D),formRef:$,onCreateFinish:function(){var _=(0,f.Z)((0,s.Z)().mark(function u(p){return(0,s.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,b.Z.api.createCompany(n(p));case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},u)}));function a(u){return _.apply(this,arguments)}return a}(),onModifyFinish:function(){var _=(0,f.Z)((0,s.Z)().mark(function u(p){return(0,s.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return T(void 0),i.next=3,b.Z.api.modifyCompany(p.id,n(p));case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},u)}));function a(u){return _.apply(this,arguments)}return a}(),queryData:function(){var _=(0,f.Z)((0,s.Z)().mark(function u(p){var e,i;return(0,s.Z)().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,b.Z.api.queryCompany(p);case 2:return e=W.sent,e.data.systemPermissions===null||e.data.systemPermissions.length===0?e.data.systemPermissionSelectList=["0"]:e.data.systemPermissionSelectList=(i=e.data.systemPermissions)===null||i===void 0?void 0:i.map(function(N){return N.id.toString()}),T(p),W.abrupt("return",e);case 6:case"end":return W.stop()}},u)}));function a(u){return _.apply(this,arguments)}return a}(),onCancel:function(){return T(void 0)}},removeData:function(){var _=(0,f.Z)((0,s.Z)().mark(function a(u){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Z.api.removeCompany(u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},a)}));return function(a){return _.apply(this,arguments)}}()})," "]})};M.default=H},72899:function(S,M,r){"use strict";var v=r(73387);M.Z={api:v}},53585:function(S,M,r){"use strict";var v=r(6382);M.Z={api:v}},64322:function(S,M,r){"use strict";r.d(M,{lb:function(){return k},uA:function(){return b},Us:function(){return K}});var v=r(39428),j=r(34792),s=r(48086),f=r(3182),I=r(49684);function k(m,o,E,d,h,O){return A.apply(this,arguments)}function A(){return A=(0,f.Z)((0,v.Z)().mark(function m(o,E,d,h,O,H){var U,R,g,Z;return(0,v.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return E(O[0]),o(!0),P.next=4,d();case 4:U=P.sent,R=U.status,g=U.exportId,R!==I.Jx.DONE&&(Z=setInterval((0,f.Z)((0,v.Z)().mark(function y(){var c,l,L,t,w,F,C,B,D;return(0,v.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d(g);case 2:c=n.sent,l=c.code,L=c.status,l!==200&&(s.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),o(!1),clearInterval(Z)),n.t0=L,n.next=n.t0===I.Jx.HANDLED?9:n.t0===I.Jx.DOWNLOAD?30:n.t0===I.Jx.DONE?32:n.t0===I.Jx.FAILED?36:40;break;case 9:return E(O[1]),n.next=12,h(g);case 12:if(t=n.sent,w=t.data,F=t.response,!(typeof w.code=="undefined"&&w)){n.next=26;break}return C=F.headers.get("Content-Disposition"),C!==null?C=decodeURI(C.split("=")[1]).replaceAll('"',""):C=H,n.next=20,w;case 20:B=n.sent,E(O[1]),D=document.createElement("a"),"download"in D?(D.style.display="none",D.href=URL.createObjectURL(B),D.download=C,document.body.appendChild(D),D.click(),URL.revokeObjectURL(D.href),document.body.removeChild(D)):navigator.msSaveBlob(B,C),n.next=29;break;case 26:s.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),o(!1),clearInterval(Z);case 29:return n.abrupt("break",41);case 30:return E(O[2]),n.abrupt("break",41);case 32:return E(O[3]),o(!1),clearInterval(Z),n.abrupt("break",41);case 36:return s.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),o(!1),clearInterval(Z),n.abrupt("break",41);case 40:return n.abrupt("break",41);case 41:case"end":return n.stop()}},y)})),2e3));case 8:case"end":return P.stop()}},m)})),A.apply(this,arguments)}function b(m){var o=["0"];return typeof m.companies!="undefined"&&m.companies!==null&&m.companies.length>0&&(o=m.companies.map(function(E){return E.parentId})),o}function K(m){if(m.current===null||!(m.current.offsetHeight||m.current.offsetWidth||m.current.getClientRects().length))return!1;var o=m.current.getBoundingClientRect(),E=o.height,d=o.top,h=window.innerHeight||document.documentElement.clientHeight;return d<h&&d+E>0}}}]);
