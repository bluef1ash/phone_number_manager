(self.webpackChunkphone_number_manager_frontend=self.webpackChunkphone_number_manager_frontend||[]).push([[76],{18731:function(me){me.exports={"license-plate-container":"license-plate-container___2dbl4","license-plate-select":"license-plate-select___3GxlX","license-plate-input":"license-plate-input___3RMLX"}},22412:function(me){me.exports={"phone-number-input":"phone-number-input___97On0"}},54803:function(me,re,r){"use strict";var A=r(11849),m=r(31199),x=r(85893),j=function(R){return(0,x.jsx)(m.Z,(0,A.Z)({width:"xl",min:0,fieldProps:{prefix:"\uFFE5",precision:2,formatter:function(i){return i.replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(i){return parseFloat(i==null?void 0:i.replace(/[\s,]/g,""))}},tooltip:"\u4FDD\u7559\u4E24\u4F4D\u5C0F\u6570"},R))};re.Z=j},90907:function(me,re,r){"use strict";r.r(re),r.d(re,{default:function(){return wr}});var A={};r.r(A),r.d(A,{batchCustomer:function(){return pr},createCustomer:function(){return lr},downloadCustomerExcel:function(){return fr},exportCustomerExcel:function(){return dr},modifyCustomer:function(){return or},patchCustomer:function(){return ir},patchCustomerMaintenance:function(){return hr},queryCustomer:function(){return ur},queryCustomerList:function(){return ar},queryCustomerMaintenanceList:function(){return vr},queryCustomerSelectList:function(){return sr},removeCustomer:function(){return cr},uploadCustomerExcel:function(){return mr}});var m=r(20228),x=r(11382),j=r(62350),B=r(24565),R=r(57663),se=r(71577),i=r(11849),Ze=r(34792),b=r(48086),y=r(2824),n=r(39428),p=r(3182),z=r(17462),ne=r(76772),ie=r(91896),de=r(96822),te=r(84787),oe=r(59962),g=r(45510),D=r(31199),F=r(64317),Z=r(67294),e=r(85893),d=function(a){var u=(0,ie.Z)({},a),c=(0,Z.useState)(0),t=(0,y.Z)(c,2),h=t[0],U=t[1],w=(0,Z.useState)(0),E=(0,y.Z)(w,2),O=E[0],v=E[1],J=(0,Z.useState)(0),P=(0,y.Z)(J,2),X=P[0],W=P[1];return(0,Z.useEffect)(function(){return W(h-O)},[h,O]),(0,e.jsxs)(oe.u,(0,i.Z)((0,i.Z)({min:1,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u4E00\u9879\u4FDD\u517B\u5957\u9910"},itemRender:function(V,q){var he=V.listDom,fe=V.action,H=q.record;return(0,e.jsx)(te.ZP,{extra:fe,title:H==null?void 0:H.name,headStyle:{padding:0},bodyStyle:{padding:0},children:he})},initialValue:[{remainingCount:0}],copyIconProps:!1,deleteIconProps:{tooltipText:"\u5220\u9664\u4E0B\u5217\u4FDD\u517B\u5957\u9910"}},u),{},{children:[(0,e.jsx)(g.Z,{name:"startDate",label:"\u5F00\u59CB\u4EAB\u53D7\u65E5\u671F",width:"xl",placeholder:"\u8BF7\u9009\u62E9\u5F00\u59CB\u4EAB\u53D7\u65E5\u671F",fieldProps:{format:function(V){return V.format("YYYY-MM-DD")}},rules:[{required:!0,message:"\u5F00\u59CB\u4EAB\u53D7\u65E5\u671F\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,e.jsx)(D.Z,{name:"giftCount",label:"\u8D60\u9001\u6B21\u6570",min:0,max:65535,placeholder:"\u8BF7\u8F93\u5165\u8D60\u9001\u6B21\u6570",fieldProps:{precision:0,onChange:function(V){return U(V)}},rules:[{required:!0,message:"\u8D60\u9001\u6B21\u6570\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,e.jsx)(D.Z,{name:"usedCount",label:"\u5DF2\u7528\u6B21\u6570",min:0,max:h,initialValue:0,placeholder:"\u8BF7\u8F93\u5165\u5DF2\u7528\u6B21\u6570",fieldProps:{precision:0,value:O,onChange:function(V){return v(V)}},rules:[{required:!0,message:"\u5DF2\u7528\u6B21\u6570\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,e.jsx)(D.Z,{name:"remainingCount",label:"\u5269\u4F59\u6B21\u6570",min:0,max:h,disabled:!0,fieldProps:{precision:0,value:X}}),(0,e.jsx)(F.Z,{name:"maintenanceId",label:"\u6240\u5C5E\u4FDD\u517B\u5957\u9910",placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u4FDD\u517B\u5957\u9910",request:(0,p.Z)((0,n.Z)().mark(function K(){return(0,n.Z)().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,de.Z.api.queryMaintenanceSelectList();case 2:return q.abrupt("return",q.sent.data);case 3:case"end":return q.stop()}},K)})),rules:[{required:!0,message:"\u6240\u5C5E\u4FDD\u517B\u5957\u9910\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]})]}))},L=d,N=r(36256),f=r(47673),G=r(4107),ve=r(9715),ye=r(71257),ae=r(952),ge=r(5966),M=r(18731),Fe=r.n(M),Ge=function(a){var u=a.name,c=a.provinceProps,t=a.numberProps,h=a.rules,U=a.label,w=ye.Z.useFormInstance(),E=(0,Z.useState)(void 0),O=(0,y.Z)(E,2),v=O[0],J=O[1],P=(0,Z.useState)(void 0),X=(0,y.Z)(P,2),W=X[0],K=X[1],V=(0,Z.useState)(void 0),q=(0,y.Z)(V,2),he=q[0],fe=q[1],H=(0,Z.useRef)(!1);return(0,Z.useEffect)(function(){if(!(!u||H.current)){if(w.getFieldValue(u)){var Y,_;J((Y=w.getFieldValue(u))===null||Y===void 0?void 0:Y.slice(0,1)),K((_=w.getFieldValue(u))===null||_===void 0?void 0:_.slice(1))}else J(void 0),K(void 0);w.validateFields([u]).then(function(){return fe(void 0)}).catch(function(pe){return fe(pe.errorFields[0].errors[0])})}},[w.getFieldValue(u||"")]),(0,Z.useEffect)(function(){if(!(!u||!v&&!W||!H.current)){var Y="".concat(v||"").concat(W||"");w.setFieldValue(u,Y),setTimeout(function(){w.validateFields([u]).then(function(){return fe(void 0)}).catch(function(_){return fe(_.errorFields[0].errors[0])})},0),H.current=!1}},[v,W]),(0,e.jsx)("div",{className:Fe()["license-plate-container"],children:(0,e.jsxs)(ae.ZP.Group,{size:0,title:(0,e.jsxs)(e.Fragment,{children:[h&&h.some(function(Y){return"required"in Y})&&(0,e.jsx)("span",{className:"text-red-500",children:"*"}),(0,e.jsx)("span",{className:"ml-0.5",children:U})]}),titleStyle:{fontWeight:"normal",marginBottom:"10px"},children:[(0,e.jsx)(F.Z,(0,i.Z)({placeholder:"\u7701\u4EFD",options:[{value:"\u4EAC",label:"\u4EAC"},{value:"\u6D25",label:"\u6D25"},{value:"\u6CAA",label:"\u6CAA"},{value:"\u6E1D",label:"\u6E1D"},{value:"\u5180",label:"\u5180"},{value:"\u8C6B",label:"\u8C6B"},{value:"\u4E91",label:"\u4E91"},{value:"\u8FBD",label:"\u8FBD"},{value:"\u9ED1",label:"\u9ED1"},{value:"\u6E58",label:"\u6E58"},{value:"\u7696",label:"\u7696"},{value:"\u9C81",label:"\u9C81"},{value:"\u65B0",label:"\u65B0"},{value:"\u82CF",label:"\u82CF"},{value:"\u6D59",label:"\u6D59"},{value:"\u8D63",label:"\u8D63"},{value:"\u9102",label:"\u9102"},{value:"\u6842",label:"\u6842"},{value:"\u7518",label:"\u7518"},{value:"\u664B",label:"\u664B"},{value:"\u8499",label:"\u8499"},{value:"\u9655",label:"\u9655"},{value:"\u5409",label:"\u5409"},{value:"\u95FD",label:"\u95FD"},{value:"\u8D35",label:"\u8D35"},{value:"\u7CA4",label:"\u7CA4"},{value:"\u9752",label:"\u9752"},{value:"\u85CF",label:"\u85CF"},{value:"\u5DDD",label:"\u5DDD"},{value:"\u5B81",label:"\u5B81"},{value:"\u743C",label:"\u743C"},{value:"\u4F7F",label:"\u4F7F"},{value:"\u9886",label:"\u9886"}],validateStatus:he?"error":void 0,help:he,onReset:function(){H.current=!1,J(void 0)},fieldProps:(0,i.Z)({className:Fe()["license-plate-select"],value:v,onChange:function(_,pe){var le,Ce;H.current=!0,c==null||(le=c.fieldProps)===null||le===void 0||(Ce=le.onChange)===null||Ce===void 0||Ce.call(le,_,pe),J(_)}},c==null?void 0:c.fieldProps)},c)),(0,e.jsx)(ge.Z,(0,i.Z)({placeholder:"\u8BF7\u8F93\u5165\u8F66\u724C\u53F7\u7801",validateStatus:he?"error":void 0,onReset:function(){H.current=!1,K(void 0)},fieldProps:(0,i.Z)({className:Fe()["license-plate-input"],value:W,onChange:function(_){var pe,le;H.current=!0,t==null||(pe=t.fieldProps)===null||pe===void 0||(le=pe.onChange)===null||le===void 0||le.call(pe,_),K(_.target.value.toUpperCase())}},t==null?void 0:t.fieldProps)},t)),(0,e.jsx)(ae.ZP.Item,{noStyle:!0,hidden:!0,name:u,rules:h,validateTrigger:["onBlur","onChange","onSubmit"],onReset:function(){H.current=!1,J(void 0),K(void 0),fe(void 0)},children:(0,e.jsx)(G.Z,{})})]})})},Je=Ge,Xe=r(37201),Ye=r(93224),ze=r(16110),ke=r(22412),Qe=r.n(ke),qe=["creatorButtonText","listValidRejectMessage","phoneNumberFormProps"],_e=function(a){var u=a.creatorButtonText,c=a.listValidRejectMessage,t=a.phoneNumberFormProps,h=(0,Ye.Z)(a,qe);return(0,e.jsx)("div",{className:Qe()["phone-number-input"],children:(0,e.jsxs)(oe.u,(0,i.Z)((0,i.Z)({creatorButtonProps:{creatorButtonText:u!=null?u:""},rules:[{validator:function(w,E){var O=c!=null?c:"\u8BF7\u6DFB\u52A0\u8054\u7CFB\u65B9\u5F0F\uFF01";return Array.isArray(E)&&E.length>0?Promise.resolve():Promise.reject(new Error(O))}}]},h),{},{children:[" ",(0,e.jsx)(ge.Z,(0,i.Z)({rules:[{required:!0,message:"\u8054\u7CFB\u65B9\u5F0F\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{validator:function(w,E){if(!E)return Promise.resolve();try{return(0,ze.h)(E,"CN").isValid()?Promise.resolve():Promise.reject(new Error("\u8054\u7CFB\u65B9\u5F0F\u8F93\u5165\u4E0D\u6B63\u786E\uFF01"))}catch(O){return Promise.reject(new Error("\u8054\u7CFB\u65B9\u5F0F\u8F93\u5165\u4E0D\u6B63\u786E\uFF01"))}}}]},t))," "]}))})},er=_e,rr=r(54803),nr=r(83617),Ue=r(72899),tr=r(4883),k=r(91156),Q=r(94256);function ar(l,a){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Q.Z.get(k.Lx,(0,i.Z)({params:a},u||{})));case 1:case"end":return t.stop()}},l)})),Ee.apply(this,arguments)}function ur(l,a){return we.apply(this,arguments)}function we(){return we=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Q.Z.get("".concat(k.Lx,"/").concat(a),(0,i.Z)({},u||{})));case 1:case"end":return t.stop()}},l)})),we.apply(this,arguments)}function sr(l){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,p.Z)((0,n.Z)().mark(function l(a){return(0,n.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Q.Z.get(k.tN,(0,i.Z)({},a||{})));case 1:case"end":return c.stop()}},l)})),Pe.apply(this,arguments)}function ir(l,a,u){return Be.apply(this,arguments)}function Be(){return Be=(0,p.Z)((0,n.Z)().mark(function l(a,u,c){return(0,n.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",Q.Z.patch("".concat(k.Lx,"/").concat(a),(0,i.Z)({data:u},c||{})));case 1:case"end":return h.stop()}},l)})),Be.apply(this,arguments)}function lr(l,a){return De.apply(this,arguments)}function De(){return De=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Q.Z.post(k.Lx,(0,i.Z)({data:a},u||{})));case 1:case"end":return t.stop()}},l)})),De.apply(this,arguments)}function or(l,a,u){return Me.apply(this,arguments)}function Me(){return Me=(0,p.Z)((0,n.Z)().mark(function l(a,u,c){return(0,n.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",Q.Z.put("".concat(k.Lx,"/").concat(a),(0,i.Z)({data:u},c||{})));case 1:case"end":return h.stop()}},l)})),Me.apply(this,arguments)}function cr(l,a){return xe.apply(this,arguments)}function xe(){return xe=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Q.Z.delete("".concat(k.Lx,"/").concat(a),(0,i.Z)({},u||{})));case 1:case"end":return t.stop()}},l)})),xe.apply(this,arguments)}function pr(l,a){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Q.Z.post(k._j,(0,i.Z)({data:a},u||{})));case 1:case"end":return t.stop()}},l)})),Ie.apply(this,arguments)}function mr(l,a,u){return je.apply(this,arguments)}function je(){return je=(0,p.Z)((0,n.Z)().mark(function l(a,u,c){var t;return(0,n.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return t=c||{},typeof a!="undefined"&&(t=(0,i.Z)((0,i.Z)({},c),{},{requestType:"form",data:a})),typeof u!="undefined"&&(t=(0,i.Z)((0,i.Z)({},t),{},{params:{importId:u}})),U.abrupt("return",Q.Z.post(k.Lr,t));case 4:case"end":return U.stop()}},l)})),je.apply(this,arguments)}function dr(l,a){return Le.apply(this,arguments)}function Le(){return Le=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Q.Z.get(k.Nm,(0,i.Z)({params:{exportId:a}},u||{})));case 1:case"end":return t.stop()}},l)})),Le.apply(this,arguments)}function fr(l,a){return Se.apply(this,arguments)}function Se(){return Se=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Q.Z.get(k.ee,(0,i.Z)({params:{exportId:a},getResponse:!0,responseType:"blob"},u||{})));case 1:case"end":return t.stop()}},l)})),Se.apply(this,arguments)}function vr(l,a){return $e.apply(this,arguments)}function $e(){return $e=(0,p.Z)((0,n.Z)().mark(function l(a,u){return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Q.Z.get(k.Oy,(0,i.Z)({params:a},u||{})));case 1:case"end":return t.stop()}},l)})),$e.apply(this,arguments)}function hr(l,a,u){return Ae.apply(this,arguments)}function Ae(){return Ae=(0,p.Z)((0,n.Z)().mark(function l(a,u,c){return(0,n.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",Q.Z.patch("".concat(k.Oy,"/").concat(a,"/").concat(u),(0,i.Z)({},c||{})));case 1:case"end":return h.stop()}},l)})),Ae.apply(this,arguments)}var ce={api:A},Re=r(49684),We=r(68393),Zr=r(64322),gr=r(86615),yr=r(30381),Cr=r.n(yr),br=r(72168),Fr=function(a,u,c,t,h){return(0,e.jsxs)(e.Fragment,{children:[h===null?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(ne.Z,{message:h,type:"error",showIcon:!0,closable:!0,style:{marginBottom:20}})," ",(0,e.jsx)(ge.Z,{width:"xl",name:"name",label:"\u5BA2\u6237\u59D3\u540D",tooltip:"\u4E0D\u80FD\u8D85\u8FC710\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u59D3\u540D",rules:[{required:!0,message:"\u5BA2\u6237\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:10,message:"\u5BA2\u6237\u59D3\u540D\u4E0D\u80FD\u8D85\u8FC710\u4E2A\u5B57\u7B26\uFF01"}]})," ",(0,e.jsx)(gr.Z.Group,{width:"xl",name:"gender",label:"\u5BA2\u6237\u6027\u522B",options:[{label:"\u7537",value:Re.VX.MALE},{label:"\u5973",value:Re.VX.FEMALE},{label:"\u672A\u77E5",value:Re.VX.UNKNOWN}],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA2\u6237\u6027\u522B\uFF01"}]})," ",(0,e.jsx)(ge.Z,{width:"xl",name:"address",label:"\u5BA2\u6237\u9884\u7559\u5730\u5740",tooltip:"\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u9884\u7559\u5730\u5740",rules:[{required:!0,message:"\u5BA2\u6237\u9884\u7559\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:255,message:"\u5BA2\u6237\u9884\u7559\u5730\u5740\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26\uFF01"}]})," ",(0,e.jsx)(er,{name:"phoneNumbers",initialValue:[""],creatorButtonText:"\u6DFB\u52A0\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F",listValidRejectMessage:"\u8BF7\u6DFB\u52A0\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F\uFF01",phoneNumberFormProps:{name:"phoneNumber",label:"\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u8054\u7CFB\u65B9\u5F0F"}})," ",(0,e.jsx)(rr.Z,{name:"price",label:"\u50A8\u503C\u4F59\u989D",placeholder:"\u8BF7\u8F93\u5165\u50A8\u503C\u4F59\u989D",rules:[{required:!0,message:"\u50A8\u503C\u4F59\u989D\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,e.jsx)(Je,{name:"licensePlate",label:"\u8F66\u8F86\u53F7\u724C",rules:[{required:!0,message:"\u8F66\u8F86\u53F7\u724C\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{pattern:/^([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z][a-zA-Z](([DF]((?![IO])[a-zA-Z0-9](?![IO]))\d{4})|(\d{5}[DF]))|[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z][A-Z][A-Z0-9]{4}[A-Z0-9挂学警港澳])$/,message:"\u8F66\u8F86\u53F7\u724C\u4E0D\u6B63\u786E\uFF01"}]}),(0,e.jsx)(F.Z,{width:"xl",name:"vehicleModel",label:"\u8F66\u578B",placeholder:"\u8BF7\u9009\u62E9\u8F66\u578B",request:(0,p.Z)((0,n.Z)().mark(function U(){var w,E,O,v;return(0,n.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,tr.Z.api.queryConfiguration("0",{params:{name:"vehicle_model"}});case 2:if(w=P.sent,E=w.code,O=w.data,!(E!==200||!O.content)){P.next=7;break}return P.abrupt("return",[]);case 7:return P.prev=7,v=JSON.parse(O.content),P.abrupt("return",v.map(function(X){return{label:X,value:X}}));case 12:return P.prev=12,P.t0=P.catch(7),P.abrupt("return",[]);case 15:case"end":return P.stop()}},U,null,[[7,12]])})),rules:[{required:!0,message:"\u8F66\u578B\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,e.jsx)(ge.Z,{width:"xl",name:"vin",label:"\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7",tooltip:"\u662F17\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7",rules:[{required:!0,message:"\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{validator:function(w,E){if(typeof E=="undefined"||E==="")return Promise.resolve();var O=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],v={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,J:1,K:2,L:3,M:4,N:5,P:7,R:9,S:2,T:3,U:4,V:5,W:6,X:7,Y:8,Z:9,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0};if(E.length!==17||/[IOQ]/.test(E))return Promise.reject(new Error("\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u6B63\u786E\uFF01"));for(var J=0,P=0;P<E.length;P++){var X=E.charAt(P).toUpperCase();if(!(X in v))return Promise.reject(new Error("\u5B57\u7B26 ".concat(X," \u4E0D\u5728\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u6B63\u786E\uFF01")));J+=v[X]*O[P]}var W=J%11,K=W===10?"X":W.toString(),V=E.charAt(8).toUpperCase();return K===V?Promise.resolve():Promise.reject(new Error("\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7\u4E0D\u6B63\u786E\uFF01"))}}]})," ",(0,e.jsx)(L,{name:"customerMaintenances"}),(0,e.jsx)(nr.Z,{width:"xl",name:"companyId",label:"\u6240\u5C5E\u5355\u4F4D",placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u5355\u4F4D",selectList:a,setSelectList:u,querySelectList:function(){var U=(0,p.Z)((0,n.Z)().mark(function w(E){return(0,n.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,Ue.Z.api.queryCompanySelectList([E]);case 2:return v.abrupt("return",v.sent.data);case 3:case"end":return v.stop()}},w)}));return function(w){return U.apply(this,arguments)}}(),onChange:function(w){typeof w!="undefined"&&(0,p.Z)((0,n.Z)().mark(function E(){return(0,n.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.t0=t,v.next=3,We.Z.api.querySystemUserByCompanyId(w);case 3:return v.t1=v.sent.data,v.abrupt("return",(0,v.t0)(v.t1));case 5:case"end":return v.stop()}},E)}))()},rules:[{required:!0,message:"\u6240\u5C5E\u5355\u4F4D\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]}),(0,e.jsx)(F.Z,{width:"xl",name:"userId",label:"\u6240\u5C5E\u7CFB\u7EDF\u7528\u6237",placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u7CFB\u7EDF\u7528\u6237",options:c,rules:[{required:!0,message:"\u6240\u5C5E\u7CFB\u7EDF\u7528\u6237\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]})]})},Er=function(){var a=(0,br.tT)("@@initialState"),u=a.initialState,c=a.setInitialState,t=(0,Z.useRef)(),h=(0,Z.useRef)(),U=(0,Z.useState)([]),w=(0,y.Z)(U,2),E=w[0],O=w[1],v=(0,Z.useState)([]),J=(0,y.Z)(v,2),P=J[0],X=J[1],W=(0,Z.useRef)(),K=(0,Z.useState)(!1),V=(0,y.Z)(K,2),q=V[0],he=V[1],fe=(0,Z.useState)(""),H=(0,y.Z)(fe,2),Y=H[0],_=H[1],pe=(0,Z.useState)(null),le=(0,y.Z)(pe,2),Ce=le[0],Pr=le[1];(0,Z.useEffect)(function(){(0,p.Z)((0,n.Z)().mark(function T(){return(0,n.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=O,o.next=3,Ue.Z.api.queryCompanySelectList([]);case 3:return o.t1=o.sent.data,o.abrupt("return",(0,o.t0)(o.t1));case 5:case"end":return o.stop()}},T)}))()},[]);var Ve=function(I){var o;return I.phoneNumbers=(o=I.phoneNumbers)===null||o===void 0?void 0:o.map(function(S){return S.phoneNumber}),I};return(0,e.jsx)(x.Z,{spinning:q,tip:Y,children:(0,e.jsxs)(Xe.Z,{routes:[{path:"/welcome",breadcrumbName:"\u9996\u9875"},{path:"",breadcrumbName:"\u5BA2\u6237\u7BA1\u7406"},{path:"/customer",breadcrumbName:"\u5BA2\u6237\u5217\u8868"}],children:[" ",(0,e.jsx)(N.Z,{customActionRef:t,customRequest:function(){var T=(0,p.Z)((0,n.Z)().mark(function I(o){return(0,n.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ce.api.queryCustomerList(o);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},I)}));return function(I){return T.apply(this,arguments)}}(),customColumns:[{title:"\u5BA2\u6237\u59D3\u540D",dataIndex:"name",sorter:!0,ellipsis:!0},{title:"\u5BA2\u6237\u6027\u522B",dataIndex:"gender",sorter:!0,ellipsis:!0,valueEnum:{0:{text:"\u5973"},1:{text:"\u7537"},2:{text:"\u672A\u77E5"}}},{title:"\u5BA2\u6237\u9884\u7559\u5730\u5740",dataIndex:"address",sorter:!0,ellipsis:!0},{title:"\u8054\u7CFB\u65B9\u5F0F",dataIndex:"phoneNumbers",ellipsis:!0,render:function(I,o){var S;return(0,e.jsx)(e.Fragment,{children:(S=o.phoneNumbers)===null||S===void 0?void 0:S.map(function(s,$){var ue;return s+($+1===((ue=o.phoneNumbers)===null||ue===void 0?void 0:ue.length)?"":"\uFF0C")})})}},{title:"\u50A8\u503C\u4F59\u989D",dataIndex:"price",valueType:"money",sorter:!0,ellipsis:!0},{title:"\u8F66\u8F86\u53F7\u724C",dataIndex:"licensePlate",sorter:!0,ellipsis:!0},{title:"\u8F66\u578B",dataIndex:"vehicleModel",sorter:!0,ellipsis:!0},{title:"\u8F66\u8F86\u8BC6\u522B\u4EE3\u53F7",dataIndex:"vin",sorter:!0,ellipsis:!0},{title:"\u6240\u5C5E\u7528\u6237",dataIndex:["systemUser","username"],sorter:!0,ellipsis:!0,search:!1},{title:"\u6240\u5C5E\u5355\u4F4D",dataIndex:["company","name"],sorter:!0,ellipsis:!0,search:!1}],isOptionButtons:!0,batchRemoveEventHandler:function(){var T=(0,p.Z)((0,n.Z)().mark(function I(o){return(0,n.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ce.api.batchCustomer({method:"DELETE",data:o});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},I)}));return function(I){return T.apply(this,arguments)}}(),modalForm:{title:"\u5BA2\u6237",element:Fr(E,O,P,X,Ce),formRef:h,onCancel:function(){return Pr(null)},onCreateFinish:function(){var T=(0,p.Z)((0,n.Z)().mark(function o(S){var s,$;return(0,n.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,ce.api.createCustomer(Ve(S));case 2:return s=C.sent,s.code===200&&(W==null||($=W.current)===null||$===void 0||$.reload()),C.abrupt("return",s);case 5:case"end":return C.stop()}},o)}));function I(o){return T.apply(this,arguments)}return I}(),onModifyFinish:function(){var T=(0,p.Z)((0,n.Z)().mark(function o(S){var s,$;return(0,n.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,ce.api.modifyCustomer(S.id,Ve(S));case 2:return s=C.sent,s.code===200&&(W==null||($=W.current)===null||$===void 0||$.reload()),C.abrupt("return",s);case 5:case"end":return C.stop()}},o)}));function I(o){return T.apply(this,arguments)}return I}(),queryData:function(){var T=(0,p.Z)((0,n.Z)().mark(function o(S){var s,$;return(0,n.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,ce.api.queryCustomer(S);case 2:return $=C.sent,$.data.phoneNumbers=(s=$.data.phoneNumbers)===null||s===void 0?void 0:s.map(function(Ne){return{phoneNumber:Ne}}),C.t0=X,C.next=7,We.Z.api.querySystemUserByCompanyId($.data.companyId);case 7:return C.t1=C.sent.data,(0,C.t0)(C.t1),C.abrupt("return",$);case 10:case"end":return C.stop()}},o)}));function I(o){return T.apply(this,arguments)}return I}()},removeData:function(){var T=(0,p.Z)((0,n.Z)().mark(function I(o){return(0,n.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ce.api.removeCustomer(o);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},I)}));return function(I){return T.apply(this,arguments)}}(),exportDataEventHandler:(0,p.Z)((0,n.Z)().mark(function T(){return(0,n.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,Zr.lb)(he,_,ce.api.exportCustomerExcel,ce.api.downloadCustomerExcel,["\u6B63\u5728\u751F\u6210\u5BA2\u6237\u4FE1\u606F\u4E2D...","\u751F\u6210\u6210\u529F\uFF0C\u6B63\u5728\u5F00\u542F\u4E0B\u8F7D...","\u6B63\u5728\u4E0B\u8F7D\u5BA2\u6237\u4FE1\u606F\u4E2D...","\u8BF7\u7B49\u5F85\u4E0B\u8F7D\u5B8C\u6210\uFF0C\u4E0B\u8F7D\u901F\u5EA6\u7531\u7F51\u7EDC\u901F\u5EA6\u51B3\u5B9A"],"\u50A8\u503C\u7EFC\u5408\u5206\u6790.xlsx"));case 1:case"end":return o.stop()}},T)})),expandable:{expandedRowRender:function(I){return(0,e.jsx)(N.Z,{isOptionButtons:!1,headerTitle:!1,search:!1,options:!1,pagination:!1,toolBarRender:!1,rowSelection:!1,actionRef:W,rowKey:function(S){return S.customerId.toString()+S.maintenanceId.toString()},customColumns:[{title:"\u4FDD\u517B\u5957\u9910\u540D\u79F0",dataIndex:["maintenance","name"],ellipsis:!0},{title:"\u8D60\u9001\u6B21\u6570",dataIndex:"giftCount",ellipsis:!0},{title:"\u5DF2\u4F7F\u7528\u6B21\u6570",dataIndex:"usedCount",ellipsis:!0},{title:"\u5269\u4F59\u6B21\u6570",dataIndex:"remainCount",ellipsis:!0,render:function(S,s){return s.giftCount-s.usedCount}},{title:"\u5F00\u59CB\u65E5\u671F",dataIndex:"startDate",ellipsis:!0,valueType:"date"},{title:"\u4F7F\u7528\u65F6\u95F4",dataIndex:"usageTime",ellipsis:!0,valueType:"dateTime"},{title:"\u64CD\u4F5C",valueType:"option",render:function(S,s){var $=s.customerId,ue=s.maintenanceId,C=s.giftCount,Ne=s.usedCount,Ke=s.startDate,Br=s.maintenance;return(0,e.jsx)(B.Z,{title:"\u662F\u5426\u4F7F\u7528\u8BE5\u5957\u9910\uFF1F",onConfirm:(0,p.Z)((0,n.Z)().mark(function Dr(){var be,Oe,He,Te;return(0,n.Z)().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(!(Ne>=C)){ee.next=3;break}return b.ZP.error("\u6B64\u4FDD\u517B\u5957\u9910\u5DF2\u4F7F\u7528\u5B8C"),ee.abrupt("return");case 3:if(be=new Date,Oe=Cr()(be),!Oe.isBefore(Ke)){ee.next=8;break}return b.ZP.error("\u5F53\u524D\u65F6\u95F4\u672A\u5230\u8BE5\u4FDD\u517B\u5957\u9910\u7684\u670D\u52A1\u671F\u9650"),ee.abrupt("return");case 8:if(!(Oe.diff(Ke,"days")>Br.serviceDay)){ee.next=11;break}return b.ZP.error("\u5F53\u524D\u65F6\u95F4\u5DF2\u8D85\u8FC7\u8BE5\u4FDD\u517B\u5957\u9910\u7684\u670D\u52A1\u671F\u9650"),ee.abrupt("return");case 11:if(!(be.getTime()-u.useCarInfoMaintenanceInterval<3e3)){ee.next=14;break}return b.ZP.error("\u64CD\u4F5C\u592A\u8FC7\u9891\u7E41\uFF0C3\u79D2\u540E\u518D\u8BD5"),ee.abrupt("return");case 14:return ee.next=16,ce.api.patchCustomerMaintenance($!=null?$:"0",ue!=null?ue:"0");case 16:He=ee.sent,He.code===200&&(b.ZP.success("\u4F7F\u7528\u6210\u529F"),(Te=W.current)===null||Te===void 0||Te.reload(),c((0,i.Z)((0,i.Z)({},u),{},{useCarInfoMaintenanceInterval:be.getTime()})));case 18:case"end":return ee.stop()}},Dr)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(se.Z,{type:"link",children:"\u4F7F\u7528"},"use_maintenance_button"+$.toString()+ue.toString())},"use_maintenance_confirm"+$.toString()+ue.toString())}}],customRequest:(0,p.Z)((0,n.Z)().mark(function o(){return(0,n.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ce.api.queryCustomerMaintenanceList({current:1,pageSize:100,params:{search:{customerId:I.id}}});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},o)}))})}}})," "]})})},wr=Er},72899:function(me,re,r){"use strict";var A=r(73387);re.Z={api:A}},4883:function(me,re,r){"use strict";r.d(re,{Z:function(){return oe}});var A={};r.r(A),r.d(A,{batchConfiguration:function(){return de},createConfiguration:function(){return y},modifyConfiguration:function(){return p},queryConfiguration:function(){return Ze},queryConfigurationList:function(){return se},removeConfiguration:function(){return ne}});var m=r(39428),x=r(11849),j=r(3182),B=r(91156),R=r(94256);function se(g,D){return i.apply(this,arguments)}function i(){return i=(0,j.Z)((0,m.Z)().mark(function g(D,F){return(0,m.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.Z.get(B.By.configuration,(0,x.Z)({params:D},F||{})));case 1:case"end":return e.stop()}},g)})),i.apply(this,arguments)}function Ze(g,D){return b.apply(this,arguments)}function b(){return b=(0,j.Z)((0,m.Z)().mark(function g(D,F){return(0,m.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.Z.get("".concat(B.By.configuration,"/").concat(D),(0,x.Z)({},F||{})));case 1:case"end":return e.stop()}},g)})),b.apply(this,arguments)}function y(g,D){return n.apply(this,arguments)}function n(){return n=(0,j.Z)((0,m.Z)().mark(function g(D,F){return(0,m.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.Z.post(B.By.configuration,(0,x.Z)({data:D},F||{})));case 1:case"end":return e.stop()}},g)})),n.apply(this,arguments)}function p(g,D,F){return z.apply(this,arguments)}function z(){return z=(0,j.Z)((0,m.Z)().mark(function g(D,F,Z){return(0,m.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",R.Z.put("".concat(B.By.configuration,"/").concat(D),(0,x.Z)({data:F},Z||{})));case 1:case"end":return d.stop()}},g)})),z.apply(this,arguments)}function ne(g,D){return ie.apply(this,arguments)}function ie(){return ie=(0,j.Z)((0,m.Z)().mark(function g(D,F){return(0,m.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.Z.delete("".concat(B.By.configuration,"/").concat(D),(0,x.Z)({},F||{})));case 1:case"end":return e.stop()}},g)})),ie.apply(this,arguments)}function de(g,D){return te.apply(this,arguments)}function te(){return te=(0,j.Z)((0,m.Z)().mark(function g(D,F){return(0,m.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.Z.post(B.By.configurationBatch,(0,x.Z)({data:D},F||{})));case 1:case"end":return e.stop()}},g)})),te.apply(this,arguments)}var oe={api:A}},96822:function(me,re,r){"use strict";r.d(re,{Z:function(){return Z}});var A={};r.r(A),r.d(A,{batchMaintenance:function(){return D},createMaintenance:function(){return ne},modifyMaintenance:function(){return de},patchMaintenance:function(){return p},queryMaintenance:function(){return y},queryMaintenanceList:function(){return se},queryMaintenanceSelectList:function(){return Ze},removeMaintenance:function(){return oe}});var m=r(39428),x=r(11849),j=r(3182),B=r(91156),R=r(94256);function se(e,d){return i.apply(this,arguments)}function i(){return i=(0,j.Z)((0,m.Z)().mark(function e(d,L){return(0,m.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",R.Z.get(B.t7,(0,x.Z)({params:d},L||{})));case 1:case"end":return f.stop()}},e)})),i.apply(this,arguments)}function Ze(e){return b.apply(this,arguments)}function b(){return b=(0,j.Z)((0,m.Z)().mark(function e(d){return(0,m.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",R.Z.get(B.Ot,(0,x.Z)({},d||{})));case 1:case"end":return N.stop()}},e)})),b.apply(this,arguments)}function y(e,d){return n.apply(this,arguments)}function n(){return n=(0,j.Z)((0,m.Z)().mark(function e(d,L){return(0,m.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",R.Z.get("".concat(B.t7,"/").concat(d),(0,x.Z)({},L||{})));case 1:case"end":return f.stop()}},e)})),n.apply(this,arguments)}function p(e,d,L){return z.apply(this,arguments)}function z(){return z=(0,j.Z)((0,m.Z)().mark(function e(d,L,N){return(0,m.Z)().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",R.Z.patch("".concat(B.t7,"/").concat(d),(0,x.Z)({data:L},N||{})));case 1:case"end":return G.stop()}},e)})),z.apply(this,arguments)}function ne(e,d){return ie.apply(this,arguments)}function ie(){return ie=(0,j.Z)((0,m.Z)().mark(function e(d,L){return(0,m.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",R.Z.post(B.t7,(0,x.Z)({data:d},L||{})));case 1:case"end":return f.stop()}},e)})),ie.apply(this,arguments)}function de(e,d,L){return te.apply(this,arguments)}function te(){return te=(0,j.Z)((0,m.Z)().mark(function e(d,L,N){return(0,m.Z)().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",R.Z.put("".concat(B.t7,"/").concat(d),(0,x.Z)({data:L},N||{})));case 1:case"end":return G.stop()}},e)})),te.apply(this,arguments)}function oe(e,d){return g.apply(this,arguments)}function g(){return g=(0,j.Z)((0,m.Z)().mark(function e(d,L){return(0,m.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",R.Z.delete("".concat(B.t7,"/").concat(d),(0,x.Z)({},L||{})));case 1:case"end":return f.stop()}},e)})),g.apply(this,arguments)}function D(e,d){return F.apply(this,arguments)}function F(){return F=(0,j.Z)((0,m.Z)().mark(function e(d,L){return(0,m.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",R.Z.post(B.Qk,(0,x.Z)({data:d},L||{})));case 1:case"end":return f.stop()}},e)})),F.apply(this,arguments)}var Z={api:A}},64322:function(me,re,r){"use strict";r.d(re,{lb:function(){return R},uA:function(){return i},Us:function(){return Ze}});var A=r(39428),m=r(34792),x=r(48086),j=r(3182),B=r(49684);function R(b,y,n,p,z,ne){return se.apply(this,arguments)}function se(){return se=(0,j.Z)((0,A.Z)().mark(function b(y,n,p,z,ne,ie){var de,te,oe,g;return(0,A.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return n(ne[0]),y(!0),F.next=4,p();case 4:de=F.sent,te=de.status,oe=de.exportId,te!==B.Jx.DONE&&(g=setInterval((0,j.Z)((0,A.Z)().mark(function Z(){var e,d,L,N,f,G,ve,ye,ae;return(0,A.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,p(oe);case 2:e=M.sent,d=e.code,L=e.status,d!==200&&(x.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),y(!1),clearInterval(g)),M.t0=L,M.next=M.t0===B.Jx.HANDLED?9:M.t0===B.Jx.DOWNLOAD?30:M.t0===B.Jx.DONE?32:M.t0===B.Jx.FAILED?36:40;break;case 9:return n(ne[1]),M.next=12,z(oe);case 12:if(N=M.sent,f=N.data,G=N.response,!(typeof f.code=="undefined"&&f)){M.next=26;break}return ve=G.headers.get("Content-Disposition"),ve!==null?ve=decodeURI(ve.split("=")[1]).replaceAll('"',""):ve=ie,M.next=20,f;case 20:ye=M.sent,n(ne[1]),ae=document.createElement("a"),"download"in ae?(ae.style.display="none",ae.href=URL.createObjectURL(ye),ae.download=ve,document.body.appendChild(ae),ae.click(),URL.revokeObjectURL(ae.href),document.body.removeChild(ae)):navigator.msSaveBlob(ye,ve),M.next=29;break;case 26:x.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),y(!1),clearInterval(g);case 29:return M.abrupt("break",41);case 30:return n(ne[2]),M.abrupt("break",41);case 32:return n(ne[3]),y(!1),clearInterval(g),M.abrupt("break",41);case 36:return x.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),y(!1),clearInterval(g),M.abrupt("break",41);case 40:return M.abrupt("break",41);case 41:case"end":return M.stop()}},Z)})),2e3));case 8:case"end":return F.stop()}},b)})),se.apply(this,arguments)}function i(b){var y=["0"];return typeof b.companies!="undefined"&&b.companies!==null&&b.companies.length>0&&(y=b.companies.map(function(n){return n.parentId})),y}function Ze(b){if(b.current===null||!(b.current.offsetHeight||b.current.offsetWidth||b.current.getClientRects().length))return!1;var y=b.current.getBoundingClientRect(),n=y.height,p=y.top,z=window.innerHeight||document.documentElement.clientHeight;return p<z&&p+n>0}}}]);
