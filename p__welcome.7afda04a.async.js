(self.webpackChunkphone_number_manager_frontend=self.webpackChunkphone_number_manager_frontend||[]).push([[653],{63684:function(K){K.exports={pre:"pre___3LPM0","statistic-card":"statistic-card___nzn69","dormitory-message":"dormitory-message___WvDZs","empty-message":"empty-message___29fnv"}},37201:function(K,F,e){"use strict";var L=e(11849),q=e(93224),O=e(61128),k=e(16924),_=e(67294),A=e(85893),W=["headerProps","routes"],u=function(D){var c=D.headerProps,f=D.routes,w=(0,q.Z)(D,W);return(0,A.jsx)(O.ZP,(0,L.Z)({header:(0,L.Z)({breadcrumb:{itemRender:function(i,s,U,V){return U.indexOf(i)===U.length-1||i.path===""?(0,A.jsx)("span",{children:i.breadcrumbName}):(0,A.jsx)(k.Link,{to:V.join("/"),children:i.breadcrumbName})},routes:f}},c)},w))};F.Z=u},46390:function(K,F,e){"use strict";e.r(F),e.d(F,{default:function(){return Me}});var L={};e.r(L),e.d(L,{queryCustomerBaseMessage:function(){return Ze},queryCustomerChart:function(){return ge}});var q=e(13254),O=e(14277),k=e(13062),_=e(71230),A=e(89032),W=e(15746),u=e(11849),r=e(39428),D=e(86582),c=e(3182),f=e(2824),w=e(91896),ee=e(78677),i=e(67294),s=e(85893),U=function(m){var p=(0,w.Z)({},m);return(0,s.jsx)(ee.Z,(0,u.Z)({style:{margin:20},label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},xAxis:{label:{autoHide:!1,autoRotate:!0}},yAxis:{label:{autoHide:!1,autoRotate:!0,formatter:function(o){return"".concat(o,"\u4EBA")}}}},p))},V=U,ve=e(93224),Ce=e(7506),te=e(73387),fe=e(14912),ye=["companySelectList","setCompanySelectList","companySelect","setCompanySelect","setData","loadingObject","dataResults","queryDashboardComputed","companySelectOnDropdownVisibleChange","isHideSelect"];function he(n){var m=n.companySelectList,p=n.setCompanySelectList,Z=n.companySelect,o=n.setCompanySelect,M=n.setData,b=n.loadingObject,N=n.dataResults,B=n.queryDashboardComputed,T=n.companySelectOnDropdownVisibleChange,x=n.isHideSelect,J=(0,ve.Z)(n,ye);return(0,s.jsx)(fe.Z.Group,(0,u.Z)({extra:x?null:(0,s.jsx)(Ce.Z,{isNotProForm:!0,selectList:m,setSelectList:p,cascaderFieldProps:{multiple:!0,placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D",onChange:function(y,v){o(v==null?void 0:v.map(function(g){return g[g.length-1]}))},onDropdownVisibleChange:typeof T!="undefined"?T:function(){var j=(0,c.Z)((0,r.Z)().mark(function y(v){var g;return(0,r.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(v===!1&&typeof M!="undefined"&&typeof b!="undefined"&&typeof B!="undefined"&&typeof N!="undefined")){l.next=6;break}return M(b),l.next=4,B({companyIds:Z==null?void 0:Z.map(function(H){return H.id})});case 4:g=l.sent.data,M(N(g));case 6:case"end":return l.stop()}},y)}));return function(y){return j.apply(this,arguments)}}()},querySelectList:function(){var j=(0,c.Z)((0,r.Z)().mark(function y(v){return(0,r.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,te.queryCompanySelectList)([v]);case 2:return C.abrupt("return",C.sent.data);case 3:case"end":return C.stop()}},y)}));return function(y){return j.apply(this,arguments)}}()})},J))}var ae=he,Se=e(37201),se=e(94256),ne=e(91156);function Ze(n,m){return G.apply(this,arguments)}function G(){return G=(0,c.Z)((0,r.Z)().mark(function n(m,p){return(0,r.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",se.Z.post(ne.qm,(0,u.Z)({data:m},p||{})));case 1:case"end":return o.stop()}},n)})),G.apply(this,arguments)}function ge(n,m){return z.apply(this,arguments)}function z(){return z=(0,c.Z)((0,r.Z)().mark(function n(m,p){return(0,r.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",se.Z.post(ne.TS,(0,u.Z)({data:m},p||{})));case 1:case"end":return o.stop()}},n)})),z.apply(this,arguments)}var I={api:L},re=e(64322),je=e(53776),Le=e(79611),De=e(48773),Pe=e(63684),E=e.n(Pe),Ee=function(){var m=(0,je.t)("@@initialState"),p=m.initialState,Z=(0,i.useState)([]),o=(0,f.Z)(Z,2),M=o[0],b=o[1],N=(0,i.useState)([]),B=(0,f.Z)(N,2),T=B[0],x=B[1],J=(0,i.useState)([]),j=(0,f.Z)(J,2),y=j[0],v=j[1],g=(0,i.useState)({inputCount:0,genderCount:{xField:"genderType",yField:"value",data:[],loading:!0},loading:!0}),C=(0,f.Z)(g,2),l=C[0],H=C[1],be=(0,i.useState)({xField:"companyName",yField:"personCount",data:[],loading:!0}),ue=(0,f.Z)(be,2),$=ue[0],oe=ue[1],Be=(0,i.useState)([!0,!0,!0,!0]),ie=(0,f.Z)(Be,2),P=ie[0],le=ie[1],de=(0,i.useRef)(null),me=(0,i.useRef)(null),Re=(0,i.useState)(!1),ce=(0,f.Z)(Re,2),pe=ce[0],Fe=ce[1],Q=function(){var h=(0,c.Z)((0,r.Z)().mark(function d(){return(0,r.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!((0,re.Us)(de)&&P[0])){a.next=8;break}return P[0]=!1,le((0,D.Z)(P)),a.t0=H,a.next=6,I.api.queryCustomerBaseMessage();case 6:a.t1=a.sent.data,(0,a.t0)(a.t1);case 8:if(!((0,re.Us)(me)&&P[1])){a.next=16;break}return P[1]=!1,le((0,D.Z)(P)),a.t2=oe,a.next=14,I.api.queryCustomerChart();case 14:a.t3=a.sent.data,(0,a.t2)(a.t3);case 16:case"end":return a.stop()}},d)}));return function(){return h.apply(this,arguments)}}();return(0,i.useEffect)(function(){return window.addEventListener("scroll",(0,c.Z)((0,r.Z)().mark(function h(){return(0,r.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},h)}))),(0,c.Z)((0,r.Z)().mark(function h(){var d,t,a,X;return(0,r.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!p){S.next=14;break}return S.next=3,p.currentUser;case 3:return t=S.sent,Fe(t==null||(d=t.companies)===null||d===void 0?void 0:d.some(function(R){return R.isLeaf})),a=["0"],typeof t.companies!="undefined"&&t.companies!==null&&t.companies.length>0&&(a=t.companies.map(function(R){return R.parentId})),S.next=9,(0,te.queryCompanySelectList)(a);case 9:return X=S.sent.data,b(X),x(X.map(function(R){var Y=(0,u.Z)({},R);return Y.isLeaf=!Y.isGrandsonLevel,Y})),S.next=14,Q();case 14:case"end":return S.stop()}},h)}))(),function(){return window.removeEventListener("scroll",(0,c.Z)((0,r.Z)().mark(function h(){return(0,r.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},h)})))}},[]),(0,s.jsxs)(Se.Z,{ghost:!0,header:{title:""},children:[(0,s.jsxs)("div",{ref:de,children:[(0,s.jsx)(ae,{title:"\u5BA2\u6237\u57FA\u672C\u4FE1\u606F",className:E()["statistic-card"],companySelectList:M,setCompanySelectList:b,companySelect:y,setCompanySelect:v,setData:H,loadingObject:(0,u.Z)((0,u.Z)({},l),{},{loading:!0}),dataResults:function(d){return(0,u.Z)({},d)},queryDashboardComputed:I.api.queryCustomerBaseMessage,isHideSelect:pe,children:l.inputCount!==null&&typeof l.inputCount!="undefined"&&l.inputCount>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(_.Z,{justify:"space-around",className:E()["dormitory-message"],children:[" ",(0,s.jsxs)(W.Z,{span:11,children:[" ",(0,s.jsx)(De.Z,{statistic:{title:"\u5DF2\u5F55\u5165\u4EBA\u6570",value:l.inputCount},loading:l.loading})," "]})," ",(0,s.jsxs)(W.Z,{span:11,children:[" ",(0,s.jsx)(Le.Z,(0,u.Z)((0,u.Z)({},l.genderCount),{},{seriesField:l.genderCount.yField,legend:{position:"top-left"}}))," "]})," "]})," "]}):(0,s.jsx)(O.Z,{className:E()["empty-message"]})})," "]}),(0,s.jsxs)("div",{ref:me,children:[(0,s.jsx)(ae,{title:"\u5BA2\u6237\u7EDF\u8BA1\u56FE\u8868",className:E()["statistic-card"],companySelectList:T,setCompanySelectList:x,companySelect:y,setCompanySelect:v,setData:oe,loadingObject:(0,u.Z)((0,u.Z)({},$),{},{loading:!0}),dataResults:function(d){return(0,u.Z)({},d)},queryDashboardComputed:I.api.queryCustomerChart,isHideSelect:pe,children:$.data!==null&&$.data.length>0?(0,s.jsx)(V,(0,u.Z)({},$)):(0,s.jsx)(O.Z,{className:E()["empty-message"]})})," "]})]})},Me=Ee}}]);
