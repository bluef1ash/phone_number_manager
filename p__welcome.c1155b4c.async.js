(self.webpackChunkphone_number_manager_frontend=self.webpackChunkphone_number_manager_frontend||[]).push([[653],{63684:function(q){q.exports={pre:"pre___3LPM0","statistic-card":"statistic-card___nzn69","dormitory-message":"dormitory-message___WvDZs","empty-message":"empty-message___29fnv"}},37201:function(q,w,e){"use strict";var h=e(11849),le=e(93224),L=e(61128),x=e(16924),P=e(67294),$=e(85893),M=["headerProps","routes"],m=function(l){var a=l.headerProps,o=l.routes,g=(0,le.Z)(l,M);return(0,$.jsx)(L.ZP,(0,h.Z)({header:(0,h.Z)({breadcrumb:{itemRender:function(n,s,O,H){return O.indexOf(n)===O.length-1||n.path===""?(0,$.jsx)("span",{children:n.breadcrumbName}):(0,$.jsx)(x.Link,{to:H.join("/"),children:n.breadcrumbName})},routes:o}},a)},g))};w.Z=m},46390:function(q,w,e){"use strict";e.r(w),e.d(w,{default:function(){return Pe}});var h={};e.r(h),e.d(h,{queryCustomerBaseMessage:function(){return te},queryCustomerChart:function(){return G}});var le=e(13254),L=e(14277),x=e(13062),P=e(71230),$=e(89032),M=e(15746),m=e(11849),i=e(39428),l=e(86582),a=e(3182),o=e(2824),g=e(91896),I=e(78677),n=e(67294),s=e(85893),O=function(C){var Z=(0,g.Z)({},C);return(0,s.jsx)(I.Z,(0,m.Z)({style:{margin:20},label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},xAxis:{label:{autoHide:!1,autoRotate:!0}},yAxis:{label:{autoHide:!1,autoRotate:!0,formatter:function(c){return"".concat(c,"\u4EBA")}}}},Z))},H=O,T=e(93224),A=e(83617),oe=e(73387),F=e(14912),ie=["companySelectList","setCompanySelectList","companySelect","setCompanySelect","setData","loadingObject","dataResults","queryDashboardComputed","companySelectOnDropdownVisibleChange","isHideSelect"];function J(d){var C=d.companySelectList,Z=d.setCompanySelectList,R=d.companySelect,c=d.setCompanySelect,X=d.setData,Y=d.loadingObject,ae=d.dataResults,k=d.queryDashboardComputed,re=d.companySelectOnDropdownVisibleChange,ne=d.isHideSelect,de=(0,T.Z)(d,ie);return(0,s.jsx)(F.Z.Group,(0,m.Z)({extra:ne?null:(0,s.jsx)(A.Z,{selectList:C,setSelectList:Z,style:{width:"13rem"},multiple:!0,placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D",onChange:function(E,S){return c(S==null?void 0:S.map(function(B){return B[B.length-1]}))},onDropdownVisibleChange:typeof re!="undefined"?re:function(){var U=(0,a.Z)((0,i.Z)().mark(function E(S){var B;return(0,i.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(S===!1&&typeof X!="undefined"&&typeof Y!="undefined"&&typeof k!="undefined"&&typeof ae!="undefined")){p.next=6;break}return X(Y),p.next=4,k({companyIds:R==null?void 0:R.map(function(se){return se.id})});case 4:B=p.sent.data,X(ae(B));case 6:case"end":return p.stop()}},E)}));return function(E){return U.apply(this,arguments)}}(),querySelectList:function(){var U=(0,a.Z)((0,i.Z)().mark(function E(S){return(0,i.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,oe.queryCompanySelectList)([S]);case 2:return D.abrupt("return",D.sent.data);case 3:case"end":return D.stop()}},E)}));return function(E){return U.apply(this,arguments)}}()})},de))}var V=J,ee=e(37201),N=e(94256),W=e(91156);function te(d,C){return y.apply(this,arguments)}function y(){return y=(0,a.Z)((0,i.Z)().mark(function d(C,Z){return(0,i.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",N.Z.post(W.qm,(0,m.Z)({data:C},Z||{})));case 1:case"end":return c.stop()}},d)})),y.apply(this,arguments)}function G(d,C){return f.apply(this,arguments)}function f(){return f=(0,a.Z)((0,i.Z)().mark(function d(C,Z){return(0,i.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",N.Z.post(W.TS,(0,m.Z)({data:C},Z||{})));case 1:case"end":return c.stop()}},d)})),f.apply(this,arguments)}var z={api:h},t=e(64322),De=e(53776),Ee=e(79611),be=e(48773),je=e(63684),Q=e.n(je),Le=function(){var C=(0,De.t)("@@initialState"),Z=C.initialState,R=(0,n.useState)([]),c=(0,o.Z)(R,2),X=c[0],Y=c[1],ae=(0,n.useState)([]),k=(0,o.Z)(ae,2),re=k[0],ne=k[1],de=(0,n.useState)([]),U=(0,o.Z)(de,2),E=U[0],S=U[1],B=(0,n.useState)({inputCount:0,genderCount:{xField:"genderType",yField:"value",data:[],loading:!0},loading:!0}),D=(0,o.Z)(B,2),p=D[0],se=D[1],Me=(0,n.useState)({xField:"companyName",yField:"personCount",data:[],loading:!0}),fe=(0,o.Z)(Me,2),ue=fe[0],ve=fe[1],Oe=(0,n.useState)([!0,!0,!0,!0]),he=(0,o.Z)(Oe,2),K=he[0],ye=he[1],Ce=(0,n.useRef)(null),ge=(0,n.useRef)(null),Re=(0,n.useState)(!1),Ze=(0,o.Z)(Re,2),Se=Ze[0],Be=Ze[1],me=function(){var b=(0,a.Z)((0,i.Z)().mark(function v(){return(0,i.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!((0,t.Us)(Ce)&&K[0])){u.next=8;break}return K[0]=!1,ye((0,l.Z)(K)),u.t0=se,u.next=6,z.api.queryCustomerBaseMessage();case 6:u.t1=u.sent.data,(0,u.t0)(u.t1);case 8:if(!((0,t.Us)(ge)&&K[1])){u.next=16;break}return K[1]=!1,ye((0,l.Z)(K)),u.t2=ve,u.next=14,z.api.queryCustomerChart();case 14:u.t3=u.sent.data,(0,u.t2)(u.t3);case 16:case"end":return u.stop()}},v)}));return function(){return b.apply(this,arguments)}}();return(0,n.useEffect)(function(){return window.addEventListener("scroll",(0,a.Z)((0,i.Z)().mark(function b(){return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,me();case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},b)}))),(0,a.Z)((0,i.Z)().mark(function b(){var v,r,u,ce;return(0,i.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!Z){j.next=14;break}return j.next=3,Z.currentUser;case 3:return r=j.sent,Be(r==null||(v=r.companies)===null||v===void 0?void 0:v.some(function(_){return _.isLeaf})),u=["0"],typeof r.companies!="undefined"&&r.companies!==null&&r.companies.length>0&&(u=r.companies.map(function(_){return _.parentId})),j.next=9,(0,oe.queryCompanySelectList)(u);case 9:return ce=j.sent.data,Y(ce),ne(ce.map(function(_){var pe=(0,m.Z)({},_);return pe.isLeaf=!pe.isGrandsonLevel,pe})),j.next=14,me();case 14:case"end":return j.stop()}},b)}))(),function(){return window.removeEventListener("scroll",(0,a.Z)((0,i.Z)().mark(function b(){return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,me();case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},b)})))}},[]),(0,s.jsxs)(ee.Z,{ghost:!0,header:{title:""},children:[(0,s.jsxs)("div",{ref:Ce,children:[(0,s.jsx)(V,{title:"\u5BA2\u6237\u57FA\u672C\u4FE1\u606F",className:Q()["statistic-card"],companySelectList:X,setCompanySelectList:Y,companySelect:E,setCompanySelect:S,setData:se,loadingObject:(0,m.Z)((0,m.Z)({},p),{},{loading:!0}),dataResults:function(v){return(0,m.Z)({},v)},queryDashboardComputed:z.api.queryCustomerBaseMessage,isHideSelect:Se,children:p.inputCount!==null&&typeof p.inputCount!="undefined"&&p.inputCount>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(P.Z,{justify:"space-around",className:Q()["dormitory-message"],children:[" ",(0,s.jsxs)(M.Z,{span:11,children:[" ",(0,s.jsx)(be.Z,{statistic:{title:"\u5DF2\u5F55\u5165\u4EBA\u6570",value:p.inputCount},loading:p.loading})," "]})," ",(0,s.jsxs)(M.Z,{span:11,children:[" ",(0,s.jsx)(Ee.Z,(0,m.Z)((0,m.Z)({},p.genderCount),{},{seriesField:p.genderCount.yField,legend:{position:"top-left"}}))," "]})," "]})," "]}):(0,s.jsx)(L.Z,{className:Q()["empty-message"]})})," "]}),(0,s.jsxs)("div",{ref:ge,children:[(0,s.jsx)(V,{title:"\u5BA2\u6237\u7EDF\u8BA1\u56FE\u8868",className:Q()["statistic-card"],companySelectList:re,setCompanySelectList:ne,companySelect:E,setCompanySelect:S,setData:ve,loadingObject:(0,m.Z)((0,m.Z)({},ue),{},{loading:!0}),dataResults:function(v){return(0,m.Z)({},v)},queryDashboardComputed:z.api.queryCustomerChart,isHideSelect:Se,children:ue.data!==null&&ue.data.length>0?(0,s.jsx)(H,(0,m.Z)({},ue)):(0,s.jsx)(L.Z,{className:Q()["empty-message"]})})," "]})]})},Pe=Le},64322:function(q,w,e){"use strict";e.d(w,{lb:function(){return $},uA:function(){return m},Us:function(){return i}});var h=e(39428),le=e(34792),L=e(48086),x=e(3182),P=e(49684);function $(l,a,o,g,I,n){return M.apply(this,arguments)}function M(){return M=(0,x.Z)((0,h.Z)().mark(function l(a,o,g,I,n,s){var O,H,T,A;return(0,h.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return o(n[0]),a(!0),F.next=4,g();case 4:O=F.sent,H=O.status,T=O.exportId,H!==P.Jx.DONE&&(A=setInterval((0,x.Z)((0,h.Z)().mark(function ie(){var J,V,ee,N,W,te,y,G,f;return(0,h.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(T);case 2:J=t.sent,V=J.code,ee=J.status,V!==200&&(L.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),a(!1),clearInterval(A)),t.t0=ee,t.next=t.t0===P.Jx.HANDLED?9:t.t0===P.Jx.DOWNLOAD?30:t.t0===P.Jx.DONE?32:t.t0===P.Jx.FAILED?36:40;break;case 9:return o(n[1]),t.next=12,I(T);case 12:if(N=t.sent,W=N.data,te=N.response,!(typeof W.code=="undefined"&&W)){t.next=26;break}return y=te.headers.get("Content-Disposition"),y!==null?y=decodeURI(y.split("=")[1]).replaceAll('"',""):y=s,t.next=20,W;case 20:G=t.sent,o(n[1]),f=document.createElement("a"),"download"in f?(f.style.display="none",f.href=URL.createObjectURL(G),f.download=y,document.body.appendChild(f),f.click(),URL.revokeObjectURL(f.href),document.body.removeChild(f)):navigator.msSaveBlob(G,y),t.next=29;break;case 26:L.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),a(!1),clearInterval(A);case 29:return t.abrupt("break",41);case 30:return o(n[2]),t.abrupt("break",41);case 32:return o(n[3]),a(!1),clearInterval(A),t.abrupt("break",41);case 36:return L.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),a(!1),clearInterval(A),t.abrupt("break",41);case 40:return t.abrupt("break",41);case 41:case"end":return t.stop()}},ie)})),2e3));case 8:case"end":return F.stop()}},l)})),M.apply(this,arguments)}function m(l){var a=["0"];return typeof l.companies!="undefined"&&l.companies!==null&&l.companies.length>0&&(a=l.companies.map(function(o){return o.parentId})),a}function i(l){if(l.current===null||!(l.current.offsetHeight||l.current.offsetWidth||l.current.getClientRects().length))return!1;var a=l.current.getBoundingClientRect(),o=a.height,g=a.top,I=window.innerHeight||document.documentElement.clientHeight;return g<I&&g+o>0}}}]);
