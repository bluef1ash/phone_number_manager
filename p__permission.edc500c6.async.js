(self.webpackChunkphone_number_manager_frontend=self.webpackChunkphone_number_manager_frontend||[]).push([[863],{64317:function(I,D,s){"use strict";var p=s(28991),Z=s(81253),a=s(85893),c=s(22270),m=s(67294),y=s(66758),g=s(61643),O=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],E=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],F=m.forwardRef(function(n,A){var B=n.fieldProps,S=n.children,b=n.params,M=n.proFieldProps,_=n.mode,f=n.valueEnum,v=n.request,l=n.showSearch,o=n.options,e=(0,Z.Z)(n,O),u=(0,m.useContext)(y.Z);return(0,a.jsx)(g.Z,(0,p.Z)((0,p.Z)({valueEnum:(0,c.h)(f),request:v,params:b,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,p.Z)({options:o,mode:_,showSearch:l,getPopupContainer:u.getPopupContainer},B),ref:A,proFieldProps:M},e),{},{children:S}))}),P=m.forwardRef(function(n,A){var B=n.fieldProps,S=n.children,b=n.params,M=n.proFieldProps,_=n.mode,f=n.valueEnum,v=n.request,l=n.options,o=(0,Z.Z)(n,E),e=(0,p.Z)({options:l,mode:_||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},B),u=(0,m.useContext)(y.Z);return(0,a.jsx)(g.Z,(0,p.Z)((0,p.Z)({valueEnum:(0,c.h)(f),request:v,params:b,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,p.Z)({getPopupContainer:u.getPopupContainer},e),ref:A,proFieldProps:M},o),{},{children:S}))}),h=F,L=P,C=h;C.SearchSelect=L,C.displayName="ProFormComponent",D.Z=C},91220:function(I,D,s){"use strict";s.d(D,{Z:function(){return Z}});var p=s(64254);function Z(a,c){var m=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!m){if(Array.isArray(a)||(m=(0,p.Z)(a))||c&&a&&typeof a.length=="number"){m&&(a=m);var y=0,g=function(){};return{s:g,n:function(){return y>=a.length?{done:!0}:{done:!1,value:a[y++]}},e:function(h){throw h},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var O=!0,E=!1,F;return{s:function(){m=m.call(a)},n:function(){var h=m.next();return O=h.done,h},e:function(h){E=!0,F=h},f:function(){try{!O&&m.return!=null&&m.return()}finally{if(E)throw F}}}}},4379:function(I,D,s){"use strict";s.r(D);var p=s(86582),Z=s(2824),a=s(39428),c=s(3182),m=s(91220),y=s(36256),g=s(37201),O=s(83617),E=s(53585),F=s(5966),P=s(59962),h=s(64317),L=s(52688),C=s(67294),n=s(85893),A=function(b,M,_){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.Z,{width:"xl",name:"name",label:"\u7CFB\u7EDF\u6743\u9650\u540D\u79F0",tooltip:"\u4E0D\u80FD\u8D85\u8FC730\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u7CFB\u7EDF\u6743\u9650\u540D\u79F0",rules:[{required:!0,message:"\u7CFB\u7EDF\u6743\u9650\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:30,message:"\u7CFB\u7EDF\u6743\u9650\u540D\u79F0\u4E0D\u80FD\u8D85\u8FC730\u4E2A\u5B57\u7B26\uFF01"}]})," ",(0,n.jsx)(F.Z,{width:"xl",name:"functionName",label:"\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0",tooltip:"\u53EA\u80FD\u8F93\u5165\u82F1\u6587\u548C\u6570\u5B57\uFF0C\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0",rules:[{required:!0,message:"\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:255,message:"\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26\uFF01"},{pattern:/^\w+$/g,message:"\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0\u53EA\u80FD\u8F93\u5165\u82F1\u6587\u548C\u6570\u5B57\uFF01"}]})," ",(0,n.jsx)(F.Z,{width:"xl",name:"uri",label:"\u7CFB\u7EDF\u6743\u9650\u5730\u5740",tooltip:"\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u7CFB\u7EDF\u6743\u9650\u5730\u5740",rules:[{max:255,message:"\u7CFB\u7EDF\u6743\u9650\u5730\u5740\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26\uFF01"},{pattern:/^\/[\w\-]+$/g,message:"\u7CFB\u7EDF\u6743\u9650\u5730\u5740\u4E0D\u6B63\u786E\uFF01"},{validator:function(v,l){var o,e=_==null||(o=_.current)===null||o===void 0?void 0:o.getFieldValue("httpMethods");return typeof e!="undefined"&&e!==null&&(typeof l=="undefined"||l.length==0)?Promise.reject(new Error("\u7CFB\u7EDF\u6743\u9650\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A\uFF01")):Promise.resolve()}}]})," ",(0,n.jsxs)(P.u,{name:"httpMethods",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7CFB\u7EDF\u6743\u9650\u65B9\u5F0F"},copyIconProps:!1,initialValue:[{httpMethod:""}],rules:[{validator:function(v,l){var o,e=_==null||(o=_.current)===null||o===void 0?void 0:o.getFieldValue("uri"),u=!1;if(Array.isArray(l)&&l.length>0){var i=(0,m.Z)(l),d;try{for(i.s();!(d=i.n()).done;){var r=d.value;if(typeof(r==null?void 0:r.httpMethod)=="undefined"){u=!0;break}}}catch(t){i.e(t)}finally{i.f()}}else u=!0;return typeof e!="undefined"&&e.length>0&&u?Promise.reject(new Error("\u8BF7\u9009\u62E9\u7CFB\u7EDF\u6743\u9650\u65B9\u5F0F\uFF01")):Promise.resolve()}}],children:[" ",(0,n.jsx)(h.Z,{name:"httpMethod",width:"xl",label:"\u7CFB\u7EDF\u6743\u9650\u65B9\u5F0F",options:["GET","HEAD","POST","PUT","PATCH","DELETE","OPTIONS","TRACE"],placeholder:"\u8BF7\u9009\u62E9\u7CFB\u7EDF\u6743\u9650\u65B9\u5F0F"})," "]})," ",(0,n.jsx)(O.Z,{width:"xl",name:"parentId",label:"\u7CFB\u7EDF\u6743\u9650\u4E0A\u7EA7\u6743\u9650",querySelectList:function(){var f=(0,c.Z)((0,a.Z)().mark(function v(l){return(0,a.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.Z.api.querySystemPermissionSelectList([l]);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},v)}));return function(v){return f.apply(this,arguments)}}(),selectList:b,setSelectList:M,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7CFB\u7EDF\u6743\u9650\u4E0A\u7EA7\u6743\u9650\uFF01"},{validator:function(v,l){var o,e=_==null||(o=_.current)===null||o===void 0?void 0:o.getFieldValue("id");return typeof e!="undefined"&&e!==0&&e.toString()===l[l.length-1]?Promise.reject(new Error("\u4E0A\u7EA7\u6743\u9650\u4E0D\u80FD\u4E3A\u81EA\u8EAB\uFF01")):Promise.resolve()}}]})," ",(0,n.jsx)(h.Z,{width:"xl",name:"menuType",label:"\u7CFB\u7EDF\u6743\u9650\u83DC\u5355\u7C7B\u578B",valueEnum:{0:"\u5168\u90E8",1:"\u524D\u7AEF",2:"\u540E\u7AEF"},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7CFB\u7EDF\u6743\u9650\u83DC\u5355\u7C7B\u578B\uFF01"}]})," ",(0,n.jsx)(L.Z,{name:"isDisplay",label:"\u7CFB\u7EDF\u6743\u9650\u662F\u5426\u663E\u793A",initialValue:!1})," "]})},B=function(){var b=(0,C.useRef)(),M=(0,C.useRef)(),_=(0,C.useState)([]),f=(0,Z.Z)(_,2),v=f[0],l=f[1];(0,C.useEffect)(function(){(0,c.Z)((0,a.Z)().mark(function e(){var u,i,d;return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=[{label:"\u9876\u7EA7\u6743\u9650",value:"0",level:0}],t.next=3,E.Z.api.querySystemPermissionSelectList(["0"]);case 3:if(t.t1=u=t.sent,t.t0=t.t1===null,t.t0){t.next=7;break}t.t0=u===void 0;case 7:if(!t.t0){t.next=11;break}t.t2=void 0,t.next=12;break;case 11:t.t2=u.data;case 12:d=t.t2,d&&d.length>0&&(i=[].concat((0,p.Z)(i),(0,p.Z)(d))),l(i);case 15:case"end":return t.stop()}},e)}))()},[]);var o=function(u){return Array.isArray(u.httpMethods)&&u.httpMethods.length>0&&(u.httpMethods=u.httpMethods.map(function(i){return i.httpMethod})),u};return(0,n.jsxs)(g.Z,{routes:[{path:"/welcome",breadcrumbName:"\u9996\u9875"},{path:"",breadcrumbName:"\u7CFB\u7EDF\u7BA1\u7406"},{path:"/system/permission",breadcrumbName:"\u7CFB\u7EDF\u6743\u9650\u5217\u8868"}],children:[" ",(0,n.jsx)(y.Z,{customActionRef:b,customRequest:function(){var e=(0,c.Z)((0,a.Z)().mark(function u(i){return(0,a.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.Z.api.querySystemPermissionList(i);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},u)}));return function(u){return e.apply(this,arguments)}}(),customColumns:[{title:"\u7CFB\u7EDF\u6743\u9650\u540D\u79F0",dataIndex:"name",sorter:!0,ellipsis:!0},{title:"\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0",dataIndex:"functionName",sorter:!0,ellipsis:!0},{title:"\u7CFB\u7EDF\u6743\u9650\u65B9\u5F0F",dataIndex:"httpMethods",sorter:!0,ellipsis:!0,valueEnum:{GET:{text:"GET"},HEAD:{text:"HEAD"},POST:{text:"POST"},PUT:{text:"PUT"},PATCH:{text:"PATCH"},DELETE:{text:"DELETE"},OPTIONS:{text:"OPTIONS"},TRACE:{text:"TRACE"}}},{title:"\u7CFB\u7EDF\u6743\u9650\u5730\u5740",dataIndex:"uri",sorter:!0,ellipsis:!0}],isOptionButtons:!0,batchRemoveEventHandler:function(){var e=(0,c.Z)((0,a.Z)().mark(function u(i){return(0,a.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.Z.api.batchSystemPermission({method:"DELETE",data:i});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},u)}));return function(u){return e.apply(this,arguments)}}(),modalForm:{title:"\u7CFB\u7EDF\u6743\u9650",element:A(v,l,M),formRef:M,onCreateFinish:function(){var e=(0,c.Z)((0,a.Z)().mark(function i(d){return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.Z.api.createSystemPermission(o(d));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},i)}));function u(i){return e.apply(this,arguments)}return u}(),onModifyFinish:function(){var e=(0,c.Z)((0,a.Z)().mark(function i(d){return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.Z.api.modifySystemPermission(d.id,o(d));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},i)}));function u(i){return e.apply(this,arguments)}return u}(),queryData:function(){var e=(0,c.Z)((0,a.Z)().mark(function i(d){var r;return(0,a.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,E.Z.api.querySystemPermission(d);case 2:return r=T.sent,Array.isArray(r.data.httpMethods)&&(r.data.httpMethods=r.data.httpMethods.map(function(w){return{httpMethod:w}})),r.data.menuType=r.data.menuType.toString(),T.abrupt("return",r);case 6:case"end":return T.stop()}},i)}));function u(i){return e.apply(this,arguments)}return u}()},removeData:function(){var e=(0,c.Z)((0,a.Z)().mark(function u(i){return(0,a.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.Z.api.removeSystemPermission(i);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},u)}));return function(u){return e.apply(this,arguments)}}()})," "]})};D.default=B},53585:function(I,D,s){"use strict";var p=s(6382);D.Z={api:p}}}]);
