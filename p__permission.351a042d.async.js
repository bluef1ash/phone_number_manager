(self.webpackChunkphone_number_manager_frontend=self.webpackChunkphone_number_manager_frontend||[]).push([[863],{64317:function(I,D,a){"use strict";var _=a(28991),O=a(81253),i=a(85893),c=a(22270),F=a(67294),T=a(66758),B=a(61643),P=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],g=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],b=F.forwardRef(function(s,Z){var y=s.fieldProps,f=s.children,v=s.params,p=s.proFieldProps,h=s.mode,E=s.valueEnum,o=s.request,l=s.showSearch,r=s.options,e=(0,O.Z)(s,P),n=(0,F.useContext)(T.Z);return(0,i.jsx)(B.Z,(0,_.Z)((0,_.Z)({valueEnum:(0,c.h)(E),request:o,params:v,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,_.Z)({options:r,mode:h,showSearch:l,getPopupContainer:n.getPopupContainer},y),ref:Z,proFieldProps:p},e),{},{children:f}))}),A=F.forwardRef(function(s,Z){var y=s.fieldProps,f=s.children,v=s.params,p=s.proFieldProps,h=s.mode,E=s.valueEnum,o=s.request,l=s.options,r=(0,O.Z)(s,g),e=(0,_.Z)({options:l,mode:h||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},y),n=(0,F.useContext)(T.Z);return(0,i.jsx)(B.Z,(0,_.Z)((0,_.Z)({valueEnum:(0,c.h)(E),request:o,params:v,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,_.Z)({getPopupContainer:n.getPopupContainer},e),ref:Z,proFieldProps:p},r),{},{children:f}))}),S=b,C=A,m=S;m.SearchSelect=C,m.displayName="ProFormComponent",D.Z=m},4379:function(I,D,a){"use strict";a.r(D);var _=a(86582),O=a(2824),i=a(39428),c=a(3182),F=a(44534),T=a(37201),B=a(7506),P=a(53585),g=a(5966),b=a(59962),A=a(64317),S=a(52688),C=a(67294),m=a(85893),s=function(f,v,p){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(g.Z,{width:"xl",name:"name",label:"\u7CFB\u7EDF\u6743\u9650\u540D\u79F0",tooltip:"\u4E0D\u80FD\u8D85\u8FC730\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u7CFB\u7EDF\u6743\u9650\u540D\u79F0",rules:[{required:!0,message:"\u7CFB\u7EDF\u6743\u9650\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:30,message:"\u7CFB\u7EDF\u6743\u9650\u540D\u79F0\u4E0D\u80FD\u8D85\u8FC730\u4E2A\u5B57\u7B26\uFF01"}]})," ",(0,m.jsx)(g.Z,{width:"xl",name:"functionName",label:"\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0",tooltip:"\u53EA\u80FD\u8F93\u5165\u82F1\u6587\u548C\u6570\u5B57\uFF0C\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0",rules:[{required:!0,message:"\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:255,message:"\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26\uFF01"},{pattern:/^\w+$/g,message:"\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0\u53EA\u80FD\u8F93\u5165\u82F1\u6587\u548C\u6570\u5B57\uFF01"}]})," ",(0,m.jsx)(g.Z,{width:"xl",name:"uri",label:"\u7CFB\u7EDF\u6743\u9650\u5730\u5740",tooltip:"\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u7CFB\u7EDF\u6743\u9650\u5730\u5740",rules:[{max:255,message:"\u7CFB\u7EDF\u6743\u9650\u5730\u5740\u4E0D\u80FD\u8D85\u8FC7255\u4E2A\u5B57\u7B26\uFF01"},{pattern:/^\/[\w\-]+$/g,message:"\u7CFB\u7EDF\u6743\u9650\u5730\u5740\u4E0D\u6B63\u786E\uFF01"},{validator:function(E,o){var l,r=p==null||(l=p.current)===null||l===void 0?void 0:l.getFieldValue("httpMethods");return typeof r!="undefined"&&r!==null&&(typeof o=="undefined"||o.length==0)?Promise.reject("\u7CFB\u7EDF\u6743\u9650\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A\uFF01"):Promise.resolve()}}]})," ",(0,m.jsxs)(b.u,{name:"httpMethods",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7CFB\u7EDF\u6743\u9650\u65B9\u5F0F"},copyIconProps:!1,initialValue:[{httpMethod:""}],rules:[{validator:function(E,o){var l,r=p==null||(l=p.current)===null||l===void 0?void 0:l.getFieldValue("uri"),e=!1;if(Array.isArray(o)&&o.length>0)for(var n=0;n<o.length;n++){var d;if(typeof((d=o[n])===null||d===void 0?void 0:d.httpMethod)=="undefined"){e=!0;break}e=!1}else e=!0;return typeof r!="undefined"&&r.length>0&&e?Promise.reject("\u8BF7\u9009\u62E9\u7CFB\u7EDF\u6743\u9650\u65B9\u5F0F\uFF01"):Promise.resolve()}}],children:[" ",(0,m.jsx)(A.Z,{name:"httpMethod",width:"xl",label:"\u7CFB\u7EDF\u6743\u9650\u65B9\u5F0F",options:["GET","HEAD","POST","PUT","PATCH","DELETE","OPTIONS","TRACE"],placeholder:"\u8BF7\u9009\u62E9\u7CFB\u7EDF\u6743\u9650\u65B9\u5F0F"})," "]})," ",(0,m.jsx)(B.Z,{width:"xl",name:"parentIdCascder",label:"\u7CFB\u7EDF\u6743\u9650\u4E0A\u7EA7\u6743\u9650",querySelectList:function(){var h=(0,c.Z)((0,i.Z)().mark(function E(o){return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,P.Z.api.querySystemPermissionSelectList([o]);case 2:return r.abrupt("return",r.sent.data);case 3:case"end":return r.stop()}},E)}));return function(E){return h.apply(this,arguments)}}(),selectList:f,setSelectList:v,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7CFB\u7EDF\u6743\u9650\u4E0A\u7EA7\u6743\u9650\uFF01"},{validator:function(E,o){var l,r=p==null||(l=p.current)===null||l===void 0?void 0:l.getFieldValue("id");return typeof r!="undefined"&&r!==0&&r.toString()===o[o.length-1]?Promise.reject("\u4E0A\u7EA7\u6743\u9650\u4E0D\u80FD\u4E3A\u81EA\u8EAB\uFF01"):Promise.resolve()}}]})," ",(0,m.jsx)(A.Z,{width:"xl",name:"menuType",label:"\u7CFB\u7EDF\u6743\u9650\u83DC\u5355\u7C7B\u578B",valueEnum:{0:"\u5168\u90E8",1:"\u524D\u7AEF",2:"\u540E\u7AEF"},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7CFB\u7EDF\u6743\u9650\u83DC\u5355\u7C7B\u578B\uFF01"}]})," ",(0,m.jsx)(S.Z,{name:"isDisplay",label:"\u7CFB\u7EDF\u6743\u9650\u662F\u5426\u663E\u793A",initialValue:!1})," "]})},Z=function(){var f=(0,C.useRef)(),v=(0,C.useRef)(),p=(0,C.useState)([]),h=(0,O.Z)(p,2),E=h[0],o=h[1];(0,C.useEffect)(function(){(0,c.Z)((0,i.Z)().mark(function r(){var e,n,d;return(0,i.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n=[{label:"\u9876\u7EA7\u6743\u9650",value:"0",level:0}],u.next=3,P.Z.api.querySystemPermissionSelectList(["0"]);case 3:if(u.t1=e=u.sent,u.t0=u.t1===null,u.t0){u.next=7;break}u.t0=e===void 0;case 7:if(!u.t0){u.next=11;break}u.t2=void 0,u.next=12;break;case 11:u.t2=e.data;case 12:d=u.t2,d&&d.length>0&&(n=[].concat((0,_.Z)(n),(0,_.Z)(d))),o(n);case 15:case"end":return u.stop()}},r)}))()},[]);var l=function(e){return Array.isArray(e.httpMethods)&&e.httpMethods.length>0&&(e.httpMethods=e.httpMethods.map(function(n){return n.httpMethod})),typeof e.parentIdCascder!="undefined"&&(e.parentId=e.parentIdCascder[e.parentIdCascder.length-1]),e};return(0,m.jsxs)(T.Z,{routes:[{path:"/welcome",breadcrumbName:"\u9996\u9875"},{path:"",breadcrumbName:"\u7CFB\u7EDF\u7BA1\u7406"},{path:"/system/permission",breadcrumbName:"\u7CFB\u7EDF\u6743\u9650\u5217\u8868"}],children:[" ",(0,m.jsx)(F.Z,{customActionRef:f,customRequest:function(){var r=(0,c.Z)((0,i.Z)().mark(function e(n){return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.Z.api.querySystemPermissionList(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},e)}));return function(e){return r.apply(this,arguments)}}(),customColumns:[{title:"\u7CFB\u7EDF\u6743\u9650\u540D\u79F0",dataIndex:"name",sorter:!0,ellipsis:!0},{title:"\u7CFB\u7EDF\u6743\u9650\u7EA6\u675F\u540D\u79F0",dataIndex:"functionName",sorter:!0,ellipsis:!0},{title:"\u7CFB\u7EDF\u6743\u9650\u65B9\u5F0F",dataIndex:"httpMethods",sorter:!0,ellipsis:!0,valueEnum:{GET:{text:"GET"},HEAD:{text:"HEAD"},POST:{text:"POST"},PUT:{text:"PUT"},PATCH:{text:"PATCH"},DELETE:{text:"DELETE"},OPTIONS:{text:"OPTIONS"},TRACE:{text:"TRACE"}}},{title:"\u7CFB\u7EDF\u6743\u9650\u5730\u5740",dataIndex:"uri",sorter:!0,ellipsis:!0}],isOptionButtons:!0,batchRemoveEventHandler:function(){var r=(0,c.Z)((0,i.Z)().mark(function e(n){return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.Z.api.batchSystemPermission({method:"DELETE",data:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},e)}));return function(e){return r.apply(this,arguments)}}(),modalForm:{title:"\u7CFB\u7EDF\u6743\u9650",element:s(E,o,v),formRef:v,onCreateFinish:function(){var r=(0,c.Z)((0,i.Z)().mark(function n(d){return(0,i.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,P.Z.api.createSystemPermission(l(d));case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},n)}));function e(n){return r.apply(this,arguments)}return e}(),onModifyFinish:function(){var r=(0,c.Z)((0,i.Z)().mark(function n(d){return(0,i.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,P.Z.api.modifySystemPermission(d.id,l(d));case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},n)}));function e(n){return r.apply(this,arguments)}return e}(),queryData:function(){var r=(0,c.Z)((0,i.Z)().mark(function n(d){var t;return(0,i.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,P.Z.api.querySystemPermission(d);case 2:return t=M.sent,Array.isArray(t.data.httpMethods)&&(t.data.httpMethods=t.data.httpMethods.map(function(L){return{httpMethod:L}})),typeof t.data.parentId!="undefined"&&(t.data.parentIdCascder=[[t.data.parentId]]),t.data.menuType=t.data.menuType.toString(),M.abrupt("return",t);case 7:case"end":return M.stop()}},n)}));function e(n){return r.apply(this,arguments)}return e}()},removeData:function(){var r=(0,c.Z)((0,i.Z)().mark(function e(n){return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.Z.api.removeSystemPermission(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},e)}));return function(e){return r.apply(this,arguments)}}()})," "]})};D.default=Z},53585:function(I,D,a){"use strict";var _=a(6382);D.Z={api:_}}}]);
