(self.webpackChunkphone_number_manager_frontend=self.webpackChunkphone_number_manager_frontend||[]).push([[990],{43673:function(V){V.exports={"modify-time":"modify-time___3DMm8"}},36256:function(V,z,r){"use strict";var J=r(49111),W=r(19650),Z=r(11849),se=r(34669),G=r(54458),K=r(43185),U=r(93009),le=r(62350),Q=r(24565),S=r(34792),C=r(48086),ie=r(57663),y=r(71577),D=r(39428),R=r(3182),X=r(86582),w=r(74379),x=r(38648),B=r(2824),ge=r(93224),$=r(49684),Fe=r(48176),be=r(84391),Me=r(90631),ye=r(49101),Ce=r(55033),Y=r(19382),k=r(96486),Ge=r.n(k),I=r(67294),Ze=r(29230),je=r(43673),Be=r.n(je),o=r(85893),Ae=["customActionRef","customColumns","customRequest","isOptionButtons","columnOptionButtons","batchRemoveEventHandler","batchElement","importDataUploadProps","exportDataEventHandler","removeData","modalForm"];function $e(b){var q,ee,O=b.customActionRef,Ie=b.customColumns,re=b.customRequest,Le=b.isOptionButtons,ue=b.columnOptionButtons,de=b.batchRemoveEventHandler,ne=b.batchElement,L=b.importDataUploadProps,_e=b.exportDataEventHandler,oe=b.removeData,e=b.modalForm,Te=(0,ge.Z)(b,Ae),We=(0,I.useState)([]),me=(0,B.Z)(We,2),Ke=me[0],ce=me[1],Ue=(0,I.useState)(!1),ve=(0,B.Z)(Ue,2),Se=ve[0],H=ve[1],xe=(0,I.useState)(!1),fe=(0,B.Z)(xe,2),pe=fe[0],A=fe[1],ke=(0,I.useState)(!1),Ee=(0,B.Z)(ke,2),N=Ee[0],he=Ee[1],He=(0,I.useState)(""),De=(0,B.Z)(He,2),Pe=De[0],Ne=De[1],Ve=function(){var a,n;e==null||(a=e.formRef)===null||a===void 0||(n=a.current)===null||n===void 0||n.resetFields()},Re=function(){var a,n;A(!0),e==null||(a=e.formRef)===null||a===void 0||(n=a.current)===null||n===void 0||n.submit()},T=function(a,n,d,u){var t=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;x.Z[n]({key:"import_data_notification",message:d,description:(0,o.jsxs)("div",{children:[(0,o.jsxs)("h5",{children:[(0,o.jsx)(Fe.Z,{})," ",typeof a=="undefined"?"\u4E0A\u4F20\u6587\u4EF6":a]}),u]}),duration:t})},ze=function(){var a=Ie;return typeof a!="undefined"&&Le&&(a=[].concat((0,X.Z)(a),[{title:"\u64CD\u4F5C",valueType:"option",render:function(d,u){var t=u.id,s=(0,o.jsx)(o.Fragment,{}),l=(0,o.jsx)(o.Fragment,{});return typeof(e==null?void 0:e.onModifyFinish)!="undefined"&&(s=(0,o.jsx)(y.Z,{type:"link",onClick:function(){var p=(0,R.Z)((0,D.Z)().mark(function i(f){var m,P,_,E,h,F;return(0,D.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(typeof(e==null?void 0:e.queryData)!="undefined"){M.next=2;break}return M.abrupt("return");case 2:return he(!1),H(!0),M.next=6,e.queryData(t);case 6:P=M.sent,_=P.code,E=P.data,_===200&&typeof E!="undefined"&&(e==null||(h=e.formRef)===null||h===void 0||(F=h.current)===null||F===void 0||F.setFieldsValue(E)),e==null||(m=e.modifyButtonPreHandler)===null||m===void 0||m.call(e,f);case 11:case"end":return M.stop()}},i)}));return function(i){return p.apply(this,arguments)}}(),children:"\u7F16\u8F91"},"edit_button"+t.toString())),typeof oe!="undefined"&&(l=(0,o.jsx)(Q.Z,{title:"\u662F\u5426\u771F\u7684\u8981\u5220\u9664\u6B64\u6761\u76EE\uFF1F",onConfirm:(0,R.Z)((0,D.Z)().mark(function p(){var i,f,m,P;return(0,D.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(typeof oe!="undefined"){E.next=2;break}return E.abrupt("return");case 2:return E.next=4,oe(t);case 4:i=E.sent,f=i.code,m=i.message,f===200?(C.ZP.success(m==="success"?"\u5220\u9664\u6210\u529F\uFF01":m),O==null||(P=O.current)===null||P===void 0||P.reload()):C.ZP.error(m);case 8:case"end":return E.stop()}},p)})),okText:"\u662F",cancelText:"\u5426",children:(0,o.jsx)(y.Z,{type:"link",children:"\u5220\u9664"},"remove_button"+t)},"remove_confirm"+t)),[s,l]}}])),a};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ce.ZP,(0,Z.Z)({actionRef:O,columnsState:{persistenceKey:"dataList",persistenceType:"localStorage"},columns:ze(),request:function(){var g=(0,R.Z)((0,D.Z)().mark(function a(n,d){var u,t,s,l,p,i,f,m,P,_;return(0,D.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(u=n.current,t=n.pageSize,s=(0,k.cloneDeep)(n),delete s.current,delete s.pageSize,l={},Object.keys(s).length>0){p={};for(i in s)if(typeof s[i]!="object"||(0,k.isArray)(s[i]))p[i]=s[i];else for(f in s[i])if(p[i+"."+f]=[],(0,k.isArray)(s[i][f]))for(m in s[i][f])p[i+"."+f].push(s[i][f][m][s[i][f][m].length-1]);l.search=p}return Object.keys(d).length>0&&(l.sort=d),P={current:u,pageSize:t},Object.keys(l).length>0&&(P.params=JSON.stringify(l)),h.next=11,re==null?void 0:re(P);case 11:return _=h.sent,h.abrupt("return",{data:_==null?void 0:_.data.records,success:(_==null?void 0:_.code)===200,total:_==null?void 0:_.data.total});case 13:case"end":return h.stop()}},a)}));return function(a,n){return g.apply(this,arguments)}}(),rowKey:"id",search:{labelWidth:"auto"},form:{syncToUrl:!1},dateFormatter:"string",toolBarRender:function(){return[typeof L!="undefined"&&(0,o.jsx)(U.Z,(0,Z.Z)((0,Z.Z)({multiple:!1,maxCount:1,customRequest:function(){var a=(0,R.Z)((0,D.Z)().mark(function n(d){var u,t,s,l,p,i,f,m;return(0,D.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(u=d.file,t=d.onSuccess,s=d.onError,typeof L!="undefined"){_.next=3;break}return _.abrupt("return");case 3:return _.next=5,L.customAction(u);case 5:l=_.sent,p=l.message,i=l.status,f=l.importId,i!==$.Jx.DONE&&(m=setInterval((0,R.Z)((0,D.Z)().mark(function E(){var h,F,j;return(0,D.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,L.asyncCallback(f);case 2:h=v.sent,F=h.code,j=h.status,F!==200&&(clearInterval(m),s==null||s({status:F||400,method:"post",message:p||"\u4E0A\u4F20\u5931\u8D25\uFF01",name:""})),v.t0=j,v.next=v.t0===$.Jx.HANDLING?9:v.t0===$.Jx.HANDLED?11:v.t0===$.Jx.DONE?13:v.t0===$.Jx.FAILED?16:19;break;case 9:return T(Pe,"info","\u6B63\u5728\u5904\u7406\u6570\u636E\u5E76\u5BFC\u5165\u6570\u636E\u5E93\uFF0C\u8BF7\u7A0D\u540E...",(0,o.jsx)(Y.Z,{})),v.abrupt("break",20);case 11:return T(Pe,"info","\u5BFC\u5165\u6570\u636E\u5E93\u5B8C\u6210\uFF0C\u5237\u65B0\u9875\u9762\uFF0C\u8BF7\u7A0D\u540E...",(0,o.jsx)(Y.Z,{})),v.abrupt("break",20);case 13:return clearInterval(m),t==null||t({code:F,message:p,importId:f,status:j}),v.abrupt("break",20);case 16:return clearInterval(m),s==null||s({status:F||400,method:"post",message:p||"\u4E0A\u4F20\u5931\u8D25\uFF01",name:""}),v.abrupt("break",20);case 19:return v.abrupt("break",20);case 20:case"end":return v.stop()}},E)})),2e3));case 10:case"end":return _.stop()}},n)}));return function(n){return a.apply(this,arguments)}}(),beforeUpload:function(n){var d=n.name,u=n.type;Ne(d);var t=u==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return t||x.Z.error({key:"import_data_notification",message:"\u53EA\u80FD\u4E0A\u4F20 Excel \u6587\u4EF6\uFF01",description:"",duration:4.5}),t||U.Z.LIST_IGNORE},onChange:function(){var a=(0,R.Z)((0,D.Z)().mark(function n(d){var u,t;return(0,D.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=d.file,l.t0=t.status,l.next=l.t0==="uploading"?4:l.t0==="error"?6:l.t0==="done"?8:11;break;case 4:return T(t.name,"info","\u6B63\u5728\u4E0A\u4F20\u6587\u4EF6\uFF0C\u8BF7\u7A0D\u540E...",(0,o.jsx)(Y.Z,{})),l.abrupt("break",12);case 6:return T(t.name,"error","\u4E0A\u4F20\u6587\u4EF6\u5931\u8D25\uFF01",(0,o.jsx)(G.Z,{percent:100,status:"exception"}),4.5),l.abrupt("break",12);case 8:return T(t.name,"error","\u4E0A\u4F20\u6587\u4EF6\u6210\u529F\uFF01",(0,o.jsx)(G.Z,{percent:100}),4.5),O==null||(u=O.current)===null||u===void 0||u.reload(),l.abrupt("break",12);case 11:return l.abrupt("break",12);case 12:case"end":return l.stop()}},n)}));return function(n){return a.apply(this,arguments)}}(),showUploadList:!1,progress:{strokeWidth:0}},L),{},{children:(0,o.jsx)(y.Z,{icon:(0,o.jsx)(be.Z,{}),children:"\u5BFC\u5165\u6570\u636E"},"importDataButton")})),typeof _e!="undefined"&&(0,o.jsx)(y.Z,{icon:(0,o.jsx)(Me.Z,{}),onClick:_e,children:"\u5BFC\u51FA\u6570\u636E"},"exportDataButton"),typeof(e==null?void 0:e.onCreateFinish)!="undefined"&&(0,o.jsx)(y.Z,{icon:(0,o.jsx)(ye.Z,{}),type:"primary",onClick:function(n){he(!0),H(!0),setTimeout(function(){var d,u,t;e==null||(d=e.formRef)===null||d===void 0||(u=d.current)===null||u===void 0||u.resetFields(),e==null||(t=e.createButtonPreHandler)===null||t===void 0||t.call(e,n)},0)},children:"\u6DFB\u52A0"},"createDataButton")].concat((0,X.Z)(typeof ue!="undefined"?ue:[]))},rowSelection:{selectedRowKeys:Ke,onChange:function(a){ce(a)},checkStrictly:!1},tableAlertRender:function(a){var n=a.selectedRowKeys;return(0,o.jsx)(W.Z,{size:24,children:(0,o.jsxs)("span",{children:["\u5DF2\u9009 ",n.length," \u9879"]})})},tableAlertOptionRender:function(a){var n=a.selectedRowKeys;return(0,o.jsxs)(W.Z,{size:16,children:[typeof de!="undefined"&&(0,o.jsx)(Q.Z,{title:"\u662F\u5426\u771F\u7684\u8981\u6279\u91CF\u5220\u9664\u6761\u76EE\uFF1F",onConfirm:(0,R.Z)((0,D.Z)().mark(function d(){var u,t,s,l;return(0,D.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,de(n);case 2:u=i.sent,t=u.code,s=u.message,t===200?(ce([]),C.ZP.success(s==="success"?"\u6279\u91CF\u5220\u9664\u6210\u529F\uFF01":s),O==null||(l=O.current)===null||l===void 0||l.reload()):C.ZP.error(s);case 6:case"end":return i.stop()}},d)})),okText:"\u662F",cancelText:"\u5426",children:(0,o.jsx)(y.Z,{type:"link",children:"\u6279\u91CF\u5220\u9664"},"batch_remove_button")},"batch_remove_confirm"),ne==null?void 0:ne(n)]})}},Te)),(0,o.jsx)(Ze.Z,(0,Z.Z)((0,Z.Z)({modalProps:(0,Z.Z)({title:(N?"\u6DFB\u52A0":"\u7F16\u8F91")+(e==null?void 0:e.title),visible:Se,confirmLoading:pe,onOk:Re,onCancel:function(a){var n,d,u;e==null||(n=e.onCancel)===null||n===void 0||n.call(e,a),e==null||(d=e.formRef)===null||d===void 0||(u=d.current)===null||u===void 0||u.resetFields(),A(!1),H(!1)},footer:(0,o.jsxs)(o.Fragment,{children:[N?(0,o.jsx)(o.Fragment,{}):(0,o.jsxs)("span",{className:Be()["modify-time"],children:["\u66F4\u65B0\u65F6\u95F4\uFF1A",e==null||(q=e.formRef)===null||q===void 0||(ee=q.current)===null||ee===void 0?void 0:ee.getFieldValue("updateTime")]}),(0,o.jsx)(y.Z,{onClick:Ve,children:"\u91CD\u7F6E"},"cancel"),(0,o.jsx)(y.Z,{type:"primary",onClick:Re,loading:pe,children:"\u4FDD\u5B58"},"ok")]})},e==null?void 0:e.modalProps),onFinish:function(){var g=(0,R.Z)((0,D.Z)().mark(function a(n){var d,u,t,s,l,p,i,f,m,P,_,E,h,F,j,M,v,ae;return(0,D.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(typeof(e==null?void 0:e.onCreateFinish)=="undefined"||typeof(e==null?void 0:e.onModifyFinish)=="undefined")){c.next=3;break}return A(!1),c.abrupt("return",!1);case 3:if(c.prev=3,n.id=e==null||(d=e.formRef)===null||d===void 0||(u=d.current)===null||u===void 0?void 0:u.getFieldValue("id"),!N){c.next=11;break}return c.next=8,e.onCreateFinish(n);case 8:c.t0=c.sent,c.next=14;break;case 11:return c.next=13,e.onModifyFinish(n);case 13:c.t0=c.sent;case 14:return p=c.t0,i=p.message,f=N?"\u6DFB\u52A0":"\u4FEE\u6539",C.ZP.success(i==="success"?"".concat(f,"\u6210\u529F\uFF01"):i),A(!1),O==null||(t=O.current)===null||t===void 0||t.reload(),e==null||(s=e.formRef)===null||s===void 0||(l=s.current)===null||l===void 0||l.resetFields(),H(!1),c.abrupt("return",!0);case 25:return c.prev=25,c.t1=c.catch(3),m=c.t1.data.message,m.includes("SQLIntegrityConstraintViolationException")?(C.ZP.error("\u6570\u636E\u6709\u91CD\u590D\u5F02\u5E38\uFF01"),_=(P=m.match(/Duplicate entry '(.+)' for key/))===null||P===void 0?void 0:P[1],_&&(j=e==null||(E=e.formRef)===null||E===void 0||(h=E.current)===null||h===void 0?void 0:h.getFieldsValue(),M=(F=Object.entries(j).find(function(Je){var Oe=(0,B.Z)(Je,2),Xe=Oe[0],te=Oe[1];return(te==null?void 0:te.toString())===_}))===null||F===void 0?void 0:F[0],M&&(e==null||(v=e.formRef)===null||v===void 0||(ae=v.current)===null||ae===void 0||ae.setFields([{name:M,errors:['"'.concat(_,'" \u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539\u540E\u518D\u8BD5')]}])))):C.ZP.error(m),A(!1),c.abrupt("return",!1);case 31:case"end":return c.stop()}},a,null,[[3,25]])}));return function(a){return g.apply(this,arguments)}}(),onFinishFailed:function(){return A(!1)},formRef:e==null?void 0:e.formRef,submitter:{render:!1}},e==null?void 0:e.props),{},{children:e==null?void 0:e.element}))]})}z.Z=$e},37201:function(V,z,r){"use strict";var J=r(11849),W=r(93224),Z=r(61128),se=r(16924),G=r(67294),K=r(85893),U=["headerProps","routes"],le=function(S){var C=S.headerProps,ie=S.routes,y=(0,W.Z)(S,U);return(0,K.jsx)(Z.ZP,(0,J.Z)({header:(0,J.Z)({breadcrumb:{itemRender:function(R,X,w,x){return w.indexOf(R)===w.length-1||R.path===""?(0,K.jsx)("span",{children:R.breadcrumbName}):(0,K.jsx)(se.Link,{to:x.join("/"),children:R.breadcrumbName})},routes:ie}},C)},y))};z.Z=le}}]);
